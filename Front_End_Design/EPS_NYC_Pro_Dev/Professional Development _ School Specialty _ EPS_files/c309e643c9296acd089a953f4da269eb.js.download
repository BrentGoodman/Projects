(self.webpackChunkCE2=self.webpackChunkCE2||[]).push([[459,150],{3545:function(t,e,s){"use strict";s.r(e),s.d(e,{V11Tracker:function(){return Ss},VirtualTracker:function(){return Rs},fp:function(){return J},getCensoredElements:function(){return Is},timing:function(){return je}});const i={a:3,abbr:4,acronym:5,address:6,applet:7,area:8,b:9,base:10,basefont:11,bdo:12,big:13,blockquote:14,body:15,br:16,button:17,caption:18,center:19,cite:20,code:21,col:22,colgroup:23,dd:24,del:25,dfn:26,dir:27,div:28,dl:29,dt:30,em:31,fieldset:32,font:33,form:34,frame:35,frameset:36,head:37,h1:38,h2:38,h3:38,h4:38,h5:38,h6:38,hr:38,html:39,i:40,iframe:41,img:42,input:43,ins:44,kbd:45,label:46,legend:47,li:48,link:49,map:50,menu:51,meta:52,noframes:53,noscript:54,object:55,embed:55,ol:56,optgroup:57,option:58,p:59,param:60,pre:61,q:62,s:63,samp:64,script:65,select:66,small:67,span:68,strike:69,strong:70,style:71,sub:72,sup:73,table:74,tbody:75,td:76,textarea:77,tfoot:78,th:79,thead:80,title:81,tr:82,tt:83,u:84,ul:85,var:86,article:87,aside:88,audio:89,bdi:90,canvas:91,command:92,details:93,figcaption:94,figure:95,footer:96,header:97,hgroup:98,keygen:99,mark:100,meter:101,nav:102,output:103,progress:104,rp:105,rt:106,ruby:107,section:108,summary:109,time:110,video:111,svg:112,"(custom)":255},r=CE2BH.extends({},i,{main:113}),n=r,o="[\\s\\u00a0\\u2028\\u2029]+",a={whitespace:new RegExp(o,"g"),strip:new RegExp(`^${o}|${o}$`,"g"),href:/\bhref="(.*?)"/i,ipHost:/^([\d\.]+|\[[a-f\d:]+\])$/i};function c(t,e){const s=t.replace(a.strip,"");return e?s.replace(a.whitespace," "):s}const l={};l.opera=l.ie=l.chrome=l.safari=l.firefox=!1,l.browser="unknown";const h="undefined"!=typeof window?window:{},u="undefined"!=typeof navigator?navigator:{},d=u.userAgent;h.opera&&"function"==typeof h.opera.version?(l.browser="opera",l.opera=!0,l.operaVersion=parseInt(h.opera.version(),10)):/\bMSIE\b/.test(d)?(l.browser="ie",l.ie=!0,l.ieVersion=parseInt(/MSIE (\d+)\.\d+/.exec(u.userAgent)[1],10),l.ieQuirksMode="BackCompat"==document.compatMode):/\b(iPhone|iP[ao]d)\b/.test(d)?(l.browser="iphone",l.iphone=!0,l.webkit=!0):/\bChrome\b/.test(d)?(l.browser="chrome",l.chrome=!0,l.webkit=!0):/AppleWebKit/.test(u.appVersion)?(l.browser="safari",l.safari=!0,l.webkit=!0):/Mozilla/i.test(d)&&!/compatible|webkit/i.test(d)&&(l.browser="firefox",l.firefox=!0),l.webkit&&(l.webkitVersion=parseInt(/AppleWebKit\/(\d+)/.exec(d)[1],10));const p=function(t){if(this.src=t,this.protocol=this.host=this.port=this.path=this.qs=this.hash=this.query=null,t){const e=typeof t;"string"==e?this.initWithString(t):"object"==e&&this.initWithURI(t)}};function f(t){try{return decodeURIComponent(t)}catch(e){return window.unescape(t)}}p.pattern=/^\s*([\S]+?:\/\/)?([^\s\/]+?@)?([^:\/\?\#]+)?(\:\d+)?(\/?[^#\?\s]*)?([\?][^#\s]*)?([#]\S+)?/i,p.prototype={initWithString(t){const e=p.pattern.exec(t),[s,i,r,n,o,a,c,l]=e;i||"/"==t.charAt(0)?(i&&(this.protocol=i.substr(0,i.indexOf(":"))),this.host=n||null,o&&(this.port=Number(o.substr(1))),a?this.path=f(a):this.host&&(this.path="/")):this.path=f((n||"")+(a||"")),c&&(this.qs=function(t,e){if(null==t||/^\s*$/.test(t))return null;const s={};let i=null;const r=t.replace(/\+/g," ").split(e||"&");let n,o;for(n=0,o=r.length;n<o;n++)i=r[n].split("="),i[0]&&(s[f(i[0])]=null==i[1]?null:f(i[1]));return s}(c.substr(1)),this.query=c.substr(1)),l&&(this.hash=f(l.substr(1)))},initWithURI(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])},isAbsolute(){return this.isURL()||this.path&&"/"==this.path.charAt(0)},isURL(){return this.protocol&&this.host},getDomain(){return this.host&&this.host.replace(/^(www|m)\./,"")},getHost(){return this.host+(this.port?`:${this.port}`:"")},getOrigin(){return`${this.protocol}://${this.getHost()}`},getFullUrl(){const t=this.query?`?${this.query}`:"";return`${this.getOrigin()}${this.path}${t}`},join(t){const e=new p(this);let{path:s}=this;return"string"==typeof t&&(t=new p(t)),t.isURL()?new p(t):(t.isAbsolute()?s=t.path:s?(s=s.split("/"),s.pop(),s=t.path?s.concat(t.path.split("/")):s,s=s.join("/")):s=this.isURL()?`/${t.path}`:t.path,e.path=s,e.qs=t.qs,e.hash=t.hash,e)},normalize(){if(!this.path)return;let t;l.ie&&l.ieVersion<9?(t=[],"/"==this.path.charAt(0)&&t.push(""),t=t.concat(this.path.split(/\/+/g)),"/"==this.path.charAt(this.path.length-1)&&t.push("")):t=this.path.split(/\/+/g);let e,s=0;do{if(e=t.length-1,".."==t[s+1])""==t[s]&&0==s?t.splice(s+1,1):(t.splice(s,2),s-=1);else if("."==t[s]){if(0==e)break;t.splice(s,1)}else s++}while(s<=e);this.path=t.join("/")},simplify(t){let e;const s=[];if(e="file"==this.protocol?this:l.ie?t?t.join(this):this:(t=t||new p(window.document.baseURI)).join(this),e.normalize(),e.host&&s.push(e.host.replace(/^(www|m)\./,"")),null!=e.port&&s.push(`:${e.port}`),"/"==e.path||/^\/(default|home|index)\b[^\/]*$/i.test(e.path)?(e.qs||e.hash)&&s.push("/"):s.push(e.path),e.qs){const t=[];for(const s in e.qs)e.qs[s]&&!/(^sess|^sid$|^phpsessid$|^jsessionid$|^__VIEWSTATE$)/i.test(s)&&t.push(`${encodeURIComponent(s)}=${encodeURIComponent(e.qs[s])}`);t.length&&s.push(`?${t.join("&")}`)}return e.hash&&s.push(`#${e.hash}`),s.join("")}};const g=`cesrk${Math.random().toString().replace(/\D/g,"")}`;function m(t){let e;const s=(t=t||window).document;return t[`${g}_path`]!==t.location.pathname&&(t[g]=function(t){const e=t.defaultView;if(t.documentElement.scrollHeight>e.innerHeight)return e;if(!t.querySelectorAll||"number"!=typeof t.body.scrollHeight)return;const{body:s}=t,i=Array.from(t.querySelectorAll("html, body, body *")).filter((t=>!t.ownerSVGElement)),r=s.getElementsByTagName("*").length;let n,o,a,c;for(n=0,o=Math.min(7e3,i.length);n<o;n++)if(a=i[n],!(a.clientHeight>=a.scrollHeight)&&(a.offsetWidth||a.offsetHeight||a.getClientRects().length)&&!(a.getElementsByTagName("*").length/r<.5||a.clientHeight>window.innerHeight||(c=a.getBoundingClientRect(),Math.floor(c.width||c.right-c.left)<.75*e.innerWidth||Math.floor(c.height||c.bottom-c.top)<.75*e.innerHeight)))return a}(s),t[`${g}_path`]=t.location.pathname),e=t[g],e=e||("BackCompat"===s.compatMode?s.body:s.documentElement),{left:e===t?e.scrollX:e.scrollLeft,top:e===t?e.scrollY:e.scrollTop,width:t.innerWidth,height:t.innerHeight}}function E(t,e){const s=Math.min(e.width,e.height),i=c(t.coords,!0).split(/[^\d\.%]+/).map((t=>function(t,e){let s=parseInt(t,10);return-1!=t.indexOf("%")&&(s*=.01*e),isNaN(s)?null:s}(t,s)));let r,n,o;if(!/circle/i.test(t.shape)){r=[],n=[];for(let t=0,e=i.length;t<e;t++)t%2?n.push(i[t]):r.push(i[t]);const t=Math.min.apply(null,r),e=Math.max.apply(null,r),s=Math.min.apply(null,n);return{left:t,top:s,width:e-t,height:Math.max.apply(null,n)-s}}if(i.length>=3)return[r,n,o]=i,{left:r-o,top:n-o,width:2*o,height:2*o}}function v(t){const e=function(t){const e=new RegExp(`(^|#)${t.parentNode.name}`,"i"),s=t.ownerDocument.getElementsByTagName("IMG");let i,r;for(i=0;r=s[i++];)if(e.test(r.useMap))return r}(t);if(!e)return;const s=C(e),i=E(t,s);return i?{left:s.left+i.left,top:s.top+i.top,width:i.width,height:i.height}:void 0}function C(t,e,s){let i;if(e=e||{},"AREA"==t.nodeName)i=v(t),i&&(e.left=i.left,e.top=i.top,e.width=i.width,e.height=i.height);else if(t.getBoundingClientRect){i=t.getBoundingClientRect();const s=m();e.left=Math.floor(i.left+s.left),e.top=Math.floor(i.top+s.top),l.webkit&&l.webkitVersion<533&&"relative"==t.style.position&&(e.left+=parseInt(t.style.left,10),e.top+=parseInt(t.style.top,10)),e.width=Math.floor(i.width||i.right-i.left),e.height=Math.floor(i.height||i.bottom-i.top)}else{e.width=t.offsetWidth,e.height=t.offsetHeight;let s=t,i=0,r=0;do{i+=s.offsetLeft||0,r+=s.offsetTop||0,s=s.offsetParent}while(s);e.left=Math.floor(i),e.top=Math.floor(r)}if(e.pageX=e.left,e.pageY=e.top,s){const t=C(s);e.left-=t.pageX,e.top-=t.pageY}return e}let k=7;const y=/(-|^)(default|open|hover|close|error|active|focus|valid|invalid|dirty|submitted|expand|collapse|hide|show|enable|disable|on|off|yui|ui)/i,T=/^\s*javascript:|^\s*#\s*$/;function b(t,e){if("TEXTAREA"==t.nodeName)return;const s=c(c(function(t){const e=void 0===t.textContent?"innerText":"textContent";let s=t[e].substr(0,16384);function i(t,s){let i,r;for(i=0;r=s[i++];)t=t.replace(r[e],"");return t}return s=i(s,t.getElementsByTagName("SCRIPT")),s=i(s,t.getElementsByTagName("NOSCRIPT")),s}(t),!0).substr(0,e||100));return c(s.replace(/[\ud800-\udbff\udc00-\udfff]+$/,""))}function w(t){if(!l.ie)return t.getAttribute("href");{const e=t.outerHTML.match(a.href);if(e)return c(e[1])}}function S(t){return/^\s*data:/.test(t)?c(t).substr(0,100):new p(t).simplify()}function _(t){return t.getAttribute("ceid")||t.getAttribute("data-ceid")}function I(t){const e=function(t){let e=t.className;if(e&&"string"==typeof e)return e=c(e.replace(/(\s|^)-ce-capture\b/g,"")).split(/\s+/),e.sort(),e.join(" ")}(t);if(!e||k<=6)return e;const s=[];for(let t=0,i=e.split(/\s+/);t<i.length;t++){const e=i[t];e&&!y.test(e)&&s.push(e)}return s.join(" ")}function A(t){let e,s;return(e=t.getAttribute("cename"))||(e=t.getAttribute("ceid"))||(e=t.getAttribute("title"))||(e=t.getAttribute("alt"))||(e=t.getAttribute("name"))||"A"==t.nodeName&&(e=b(t))?e:(e=w(t))&&(s=w(t),s&&!T.test(s))?new p(e).simplify():(e=t.getAttribute("src"))?S(e):(e=b(t))||(e=t.getAttribute("id"))||(e=I(t))?e:""}function O(t,e){e&&(k=e);const s={type:n[t.nodeName.toLowerCase()]||0};let i,r,o,a,c;return(i=A(t))&&(s.name=i),(r=function(t){switch(t.nodeName){case"A":{const e=w(t);if(e&&!T.test(e))return new p(t.href).simplify();if(t.className)return`@#${I(t)}`;break}case"IMG":case"IFRAME":case"EMBED":return S(t.src);case"OBJECT":return S(t.data);case"INPUT":case"SELECT":case"TEXTAREA":return t.name;default:return I(t)}}(t))&&(s.data=r),(o=t.getAttribute("id"))&&(s.id=o),(a=_(t))&&(s.ceid=a),(c=function(t){const{parentNode:e}=t;let s=null;if(e&&e.getAttribute&&e!=t.ownerDocument.body)return(s=e.id)&&e.ownerDocument.getElementById(s)==e?s:_(e)||null}(t))&&(s.parentID=c),C(t,s,c?t.parentNode:null),s}function R(t){if("string"==typeof t)return t;const e=t.toString(16);return e.length%2!=0?`0${e}`:e}const N=32,D={SCRIPT:0,NOSCRIPT:0,STYLE:0,LINK:0},L=CE2BH.extends({},D,{TEMPLATE:0}),P="#document-fragment";function H(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11;return t>=13?L:12===t?D:null}function U(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11;return t>=13?r:i}function M(t){return"string"==typeof t?`[${R(function(t){const e=2147483648+function(t){let e=0;if(0==t.length)return e;for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e|=0;return e}(t);return 2048+e%63487}(t))}]`:R(t)}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11;const s=t.nodeName.toLowerCase(),i=U(e)[s]||0;return 0===i&&e>=13?s:i}function x(t){const e=[];let s,i,r="";for(let i=0,r=t.length;i<r;i++){const r=t[i];r.type===(s&&s.type)&&r.relation===s.relation?e[e.length-1].count++:e.push({type:r.type,relation:r.relation,count:1}),s=r}for(let t=0,s=e.length;t<s;t++){const s=e[t];if(s.relation&&s.relation!==i&&(r+=1===s.relation?"^":"<",i=s.relation),s.count>2)r+=`${M(s.type)}x${R(s.count)}`;else for(let t=0;t<s.count;t++)r+=M(s.type)}return r}function V(t){let e,{formatVersion:s=11}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t;const r=[],n=H(s),o=s>=13;for(;;){if(i.previousElementSibling)e=1,i=i.previousElementSibling;else if(i.parentNode&&i.parentNode!==document.body&&i.parentNode!==document.documentElement)e=2,i=i.parentNode;else{if(!o||i.nodeName!==P||!i.host)break;e=2,i=i.host}if((!n||!(i.nodeName in n))&&((!o||i.nodeName!==P)&&(r.push({type:B(i,s),relation:e}),r.length>=N)))break}return r}function F(t){let{formatVersion:e=11}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[],i=H(e);for(let r=t.nextElementSibling;s.length<N&&r;r=r.nextElementSibling)i&&r.nodeName in i||s.push({type:B(r,e)});return s}function $(t){let{formatVersion:e,descendants:s=[]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=H(e),r=e>=13,n=r&&t.shadowRoot||t,o=n.querySelectorAll("*");for(let t=0;t<o.length&&s.length<N;t++){const n=o[t];e>=13&&n.ownerSVGElement||(i&&n.nodeName in i||(s.push({type:B(n,e)}),r&&n.shadowRoot&&s.push(...$(n.shadowRoot,{formatVersion:e,descendants:s}))))}return s}const q=function(t){let{formatVersion:e,ignore:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"number"!=typeof e&&(e=s?12:11),this.type=B(t,e),this.elders=x(V(t,{formatVersion:e})),this.youngerSiblings=x(F(t,{formatVersion:e})),this.descendants=x($(t,{formatVersion:e})),C(t,this),this.name=A(t)};function G(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new q(t,e)}function K(t){const e=[],{body:s}=document;let i,r,n,o;if(s.getElementsByClassName?n=s.getElementsByClassName(t):s.querySelectorAll&&(n=s.querySelectorAll(`.${t}`)),n)for(i=0;r=n[i++];)e.push(r);else for(n=s.getElementsByTagName("*"),o=new RegExp(`(^|\\s)${t}($|\\s)`),i=0;r=n[i++];)r.className&&o.test(r.className)&&e.push(r);return e}function Y(t,e){if(t==e)return!0;if("function"==typeof t.contains)return t.contains(e);let s=e;do{s=s.parentNode}while(s&&s!=document.body&&s!=t);return s==t}function j(t,e){let s,i;if(t&&t.length)for(s=0;i=t[s++];)if(Y(i,e))return i}function W(t,e){const s=(i=t,window.getComputedStyle?window.getComputedStyle.call(window,i,null):i.currentStyle);var i;if("none"===s.display)return!1;if(!e&&"hidden"===s.visibility)return!1;if(s.opacity<.1)return!1;const r=t.getBoundingClientRect();if(!["static","sticky"].includes(s.position)&&("visible"!==s.overflowX||"visible"!==s.overflowY)&&(r.width<.1||r.height<.1))return!1;const n=t.parentElement,o=[t.ownerDocument.body,t.ownerDocument.documentElement];return!(n&&!o.includes(n))||W(t.parentElement,!0)}function X(t){let{spanShadowRoots:e=!1,result:s=[]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let i=0,r=t.querySelectorAll("*");i<r.length;i++){const t=r[i];s.push(t),e&&t.shadowRoot&&X(t.shadowRoot,{spanShadowRoots:e,result:s})}return s}q.fromObject=function(t){if(t instanceof q)return t;const e=Object.create(q.prototype);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},q.prototype.toString=function(){return`${q.hex(this.type)};${this.elders};${this.youngerSiblings};${this.descendants}`};const Q={SCRIPT:0,NOSCRIPT:0,STYLE:0,BR:0};function z(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[],{body:s}=document,i=s.clientWidth,r=K("-ce-capture"),n=K("-ce-ignore"),o=Q,a=null==t.skipHidden||t.skipHidden,c=null==t.skipOffScreen||t.skipOffScreen,{onHidden:l}=t,{onFingerprint:h}=t,{snakeCase:u}=t,{fpVersion:d}=t,p=t.fpOptions||{};let f,g,m,E;const v=p.formatVersion>=13,C=t.elements||X(s,{spanShadowRoots:v});for(f=0;g=C[f++];)try{if(g.nodeName in o||"INPUT"==g.nodeName&&"hidden"==g.type)continue;if(a&&"AREA"!=g.nodeName&&!W(g)){l&&l(g);continue}if(j(n,g))continue;if((E=j(r,g))&&E!=g)continue;if(g.ownerSVGElement)continue;if(m=2===d?G(g,p):O(g),u&&(m.parentID&&(m.parent_id=m.parentID,delete m.parentID),m.page_x=m.pageX,m.page_y=m.pageY,delete m.pageX,delete m.pageY),h&&h(g,m),c&&m.pageX+m.width<.25*-i)continue;if(r.length){let t=!1;for(let e=0;E=r[e++];)if(E!=g&&Y(E,g)){t=!0;break}if(t)continue}e.push(m)}catch(t){console.log(t)}return e.sort(((t,e)=>(t.width&&t.height&&t.type?-1:1)-(e.width&&e.height&&e.type?-1:1))),e}var J={fingerprint:O,fingerprint2:G,fingerprint2FromObject:function(t){if(t instanceof q)return t;const e=Object.create(q.prototype);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},scroll:m,getBox:C,getAllFingerprints:z,getAllFingerprints2:function(t){t&&(t.fpOptions={},"ignore"in t&&(t.fpOptions.ignore=t.ignore,delete t.ignore),"encodeUnknown"in t&&(t.fpOptions.encodeUnknown=t.encodeUnknown,delete t.encodeUnknown),"formatVersion"in t&&(t.fpOptions.formatVersion=t.formatVersion,delete t.formatVersion));const e=z(CE2BH.extends({fpVersion:2,skipHidden:!1},t));let s;for(let t=0;s=e[t++];)s.element_fingerprint_id=t,s.found=!0,s.parentID&&(s.parent_id=s.parentID),delete s.parentID,delete s.pageX,delete s.pageY;return e},IGNORED_TAGS:Q,TAG_TYPES:n},Z=s(4991),tt=s(419),et=s(5009),st=Uint8Array,it=Uint16Array,rt=Uint32Array,nt=new st([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ot=new st([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),at=new st([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ct=function(t,e){for(var s=new it(31),i=0;i<31;++i)s[i]=e+=1<<t[i-1];var r=new rt(s[30]);for(i=1;i<30;++i)for(var n=s[i];n<s[i+1];++n)r[n]=n-s[i]<<5|i;return[s,r]},lt=ct(nt,2),ht=lt[0],ut=lt[1];ht[28]=258,ut[258]=28;for(var dt=ct(ot,0),pt=(dt[0],dt[1]),ft=new it(32768),gt=0;gt<32768;++gt){var mt=(43690&gt)>>>1|(21845&gt)<<1;mt=(61680&(mt=(52428&mt)>>>2|(13107&mt)<<2))>>>4|(3855&mt)<<4,ft[gt]=((65280&mt)>>>8|(255&mt)<<8)>>>1}var Et=function(t,e,s){for(var i=t.length,r=0,n=new it(e);r<i;++r)t[r]&&++n[t[r]-1];var o,a=new it(e);for(r=0;r<e;++r)a[r]=a[r-1]+n[r-1]<<1;if(s){o=new it(1<<e);var c=15-e;for(r=0;r<i;++r)if(t[r])for(var l=r<<4|t[r],h=e-t[r],u=a[t[r]-1]++<<h,d=u|(1<<h)-1;u<=d;++u)o[ft[u]>>>c]=l}else for(o=new it(i),r=0;r<i;++r)t[r]&&(o[r]=ft[a[t[r]-1]++]>>>15-t[r]);return o},vt=new st(288);for(gt=0;gt<144;++gt)vt[gt]=8;for(gt=144;gt<256;++gt)vt[gt]=9;for(gt=256;gt<280;++gt)vt[gt]=7;for(gt=280;gt<288;++gt)vt[gt]=8;var Ct=new st(32);for(gt=0;gt<32;++gt)Ct[gt]=5;var kt=Et(vt,9,0),yt=Et(Ct,5,0),Tt=function(t){return(t+7)/8|0},bt=function(t,e,s){(null==e||e<0)&&(e=0),(null==s||s>t.length)&&(s=t.length);var i=new(2==t.BYTES_PER_ELEMENT?it:4==t.BYTES_PER_ELEMENT?rt:st)(s-e);return i.set(t.subarray(e,s)),i},wt=function(t,e,s){s<<=7&e;var i=e/8|0;t[i]|=s,t[i+1]|=s>>>8},St=function(t,e,s){s<<=7&e;var i=e/8|0;t[i]|=s,t[i+1]|=s>>>8,t[i+2]|=s>>>16},_t=function(t,e){for(var s=[],i=0;i<t.length;++i)t[i]&&s.push({s:i,f:t[i]});var r=s.length,n=s.slice();if(!r)return[Lt,0];if(1==r){var o=new st(s[0].s+1);return o[s[0].s]=1,[o,1]}s.sort((function(t,e){return t.f-e.f})),s.push({s:-1,f:25001});var a=s[0],c=s[1],l=0,h=1,u=2;for(s[0]={s:-1,f:a.f+c.f,l:a,r:c};h!=r-1;)a=s[s[l].f<s[u].f?l++:u++],c=s[l!=h&&s[l].f<s[u].f?l++:u++],s[h++]={s:-1,f:a.f+c.f,l:a,r:c};var d=n[0].s;for(i=1;i<r;++i)n[i].s>d&&(d=n[i].s);var p=new it(d+1),f=It(s[h-1],p,0);if(f>e){i=0;var g=0,m=f-e,E=1<<m;for(n.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));i<r;++i){var v=n[i].s;if(!(p[v]>e))break;g+=E-(1<<f-p[v]),p[v]=e}for(g>>>=m;g>0;){var C=n[i].s;p[C]<e?g-=1<<e-p[C]++-1:++i}for(;i>=0&&g;--i){var k=n[i].s;p[k]==e&&(--p[k],++g)}f=e}return[new st(p),f]},It=function(t,e,s){return-1==t.s?Math.max(It(t.l,e,s+1),It(t.r,e,s+1)):e[t.s]=s},At=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new it(++e),i=0,r=t[0],n=1,o=function(t){s[i++]=t},a=1;a<=e;++a)if(t[a]==r&&a!=e)++n;else{if(!r&&n>2){for(;n>138;n-=138)o(32754);n>2&&(o(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(o(r),--n;n>6;n-=6)o(8304);n>2&&(o(n-3<<5|8208),n=0)}for(;n--;)o(r);n=1,r=t[a]}return[s.subarray(0,i),e]},Ot=function(t,e){for(var s=0,i=0;i<e.length;++i)s+=t[i]*e[i];return s},Rt=function(t,e,s){var i=s.length,r=Tt(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var n=0;n<i;++n)t[r+n+4]=s[n];return 8*(r+4+i)},Nt=function(t,e,s,i,r,n,o,a,c,l,h){wt(e,h++,s),++r[256];for(var u=_t(r,15),d=u[0],p=u[1],f=_t(n,15),g=f[0],m=f[1],E=At(d),v=E[0],C=E[1],k=At(g),y=k[0],T=k[1],b=new it(19),w=0;w<v.length;++w)b[31&v[w]]++;for(w=0;w<y.length;++w)b[31&y[w]]++;for(var S=_t(b,7),_=S[0],I=S[1],A=19;A>4&&!_[at[A-1]];--A);var O,R,N,D,L=l+5<<3,P=Ot(r,vt)+Ot(n,Ct)+o,H=Ot(r,d)+Ot(n,g)+o+14+3*A+Ot(b,_)+(2*b[16]+3*b[17]+7*b[18]);if(L<=P&&L<=H)return Rt(e,h,t.subarray(c,c+l));if(wt(e,h,1+(H<P)),h+=2,H<P){O=Et(d,p,0),R=d,N=Et(g,m,0),D=g;var U=Et(_,I,0);wt(e,h,C-257),wt(e,h+5,T-1),wt(e,h+10,A-4),h+=14;for(w=0;w<A;++w)wt(e,h+3*w,_[at[w]]);h+=3*A;for(var M=[v,y],B=0;B<2;++B){var x=M[B];for(w=0;w<x.length;++w){var V=31&x[w];wt(e,h,U[V]),h+=_[V],V>15&&(wt(e,h,x[w]>>>5&127),h+=x[w]>>>12)}}}else O=kt,R=vt,N=yt,D=Ct;for(w=0;w<a;++w)if(i[w]>255){V=i[w]>>>18&31;St(e,h,O[V+257]),h+=R[V+257],V>7&&(wt(e,h,i[w]>>>23&31),h+=nt[V]);var F=31&i[w];St(e,h,N[F]),h+=D[F],F>3&&(St(e,h,i[w]>>>5&8191),h+=ot[F])}else St(e,h,O[i[w]]),h+=R[i[w]];return St(e,h,O[256]),h+R[256]},Dt=new rt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lt=new st(0),Pt=function(t,e,s,i,r,n){var o=t.length,a=new st(i+o+5*(1+Math.ceil(o/7e3))+r),c=a.subarray(i,a.length-r),l=0;if(!e||o<8)for(var h=0;h<=o;h+=65535){var u=h+65535;u>=o&&(c[l>>3]=n),l=Rt(c,l+1,t.subarray(h,u))}else{for(var d=Dt[e-1],p=d>>>13,f=8191&d,g=(1<<s)-1,m=new it(32768),E=new it(g+1),v=Math.ceil(s/3),C=2*v,k=function(e){return(t[e]^t[e+1]<<v^t[e+2]<<C)&g},y=new rt(25e3),T=new it(288),b=new it(32),w=0,S=0,_=(h=0,0),I=0,A=0;h<o;++h){var O=k(h),R=32767&h,N=E[O];if(m[R]=N,E[O]=R,I<=h){var D=o-h;if((w>7e3||_>24576)&&D>423){l=Nt(t,c,0,y,T,b,S,_,A,h-A,l),_=w=S=0,A=h;for(var L=0;L<286;++L)T[L]=0;for(L=0;L<30;++L)b[L]=0}var P=2,H=0,U=f,M=R-N&32767;if(D>2&&O==k(h-M))for(var B=Math.min(p,D)-1,x=Math.min(32767,h),V=Math.min(258,D);M<=x&&--U&&R!=N;){if(t[h+P]==t[h+P-M]){for(var F=0;F<V&&t[h+F]==t[h+F-M];++F);if(F>P){if(P=F,H=M,F>B)break;var $=Math.min(M,F-2),q=0;for(L=0;L<$;++L){var G=h-M+L+32768&32767,K=G-m[G]+32768&32767;K>q&&(q=K,N=G)}}}M+=(R=N)-(N=m[R])+32768&32767}if(H){y[_++]=268435456|ut[P]<<18|pt[H];var Y=31&ut[P],j=31&pt[H];S+=nt[Y]+ot[j],++T[257+Y],++b[j],I=h+P,++w}else y[_++]=t[h],++T[t[h]]}}l=Nt(t,c,n,y,T,b,S,_,A,h-A,l),!n&&7&l&&(l=Rt(c,l+1,Lt))}return bt(a,0,i+Tt(l)+r)},Ht=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var s=e,i=9;--i;)s=(1&s&&-306674912)^s>>>1;t[e]=s}return t}(),Ut=function(){var t=-1;return{p:function(e){for(var s=t,i=0;i<e.length;++i)s=Ht[255&s^e[i]]^s>>>8;t=s},d:function(){return~t}}},Mt=function(t,e,s,i,r){return Pt(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,s,i,!r)},Bt=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},xt=function(t,e){var s=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&Bt(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),s){t[3]=8;for(var i=0;i<=s.length;++i)t[i+10]=s.charCodeAt(i)}},Vt=function(t){return 10+(t.filename&&t.filename.length+1||0)};function Ft(t,e){e||(e={});var s=Ut(),i=t.length;s.p(t);var r=Mt(t,e,Vt(e),8),n=r.length;return xt(r,e),Bt(r,n-8,s.d()),Bt(r,n-4,i),r}var $t="undefined"!=typeof TextEncoder&&new TextEncoder,qt="undefined"!=typeof TextDecoder&&new TextDecoder;try{qt.decode(Lt,{stream:!0}),1}catch(t){}function Gt(t,e){if(e){for(var s=new st(t.length),i=0;i<t.length;++i)s[i]=t.charCodeAt(i);return s}if($t)return $t.encode(t);var r=t.length,n=new st(t.length+(t.length>>1)),o=0,a=function(t){n[o++]=t};for(i=0;i<r;++i){if(o+5>n.length){var c=new st(o+8+(r-i<<1));c.set(n),n=c}var l=t.charCodeAt(i);l<128||e?a(l):l<2048?(a(192|l>>6),a(128|63&l)):l>55295&&l<57344?(a(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++i))>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|63&l)):(a(224|l>>12),a(128|l>>6&63),a(128|63&l))}return bt(n,0,o)}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Kt=s(4317);function Yt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];const r=1===s.length&&s[0].includes(".")?s[0].split("."):s;let n=t;for(let t=0;t<r.length;t++){if(n=n[r[t]],!n)break}return n}function jt(t){if(!t)return;const e=t.match(/[\d,]+/);return e&&parseFloat(e[0].replace(",","."))}function Wt(t){const e=t.composedPath&&t.composedPath();let{target:s}=t;return s.shadowRoot&&e&&e.length>0&&([s]=e),s}function Xt(t,e){let s;if(s="function"==typeof e?t.findIndex(e):t.findIndex((t=>t===e)),s>=0){const e=t.splice(s,1);if(e&&e.length>0)return e[0]}}const Qt=()=>{if(void 0===CE2.state._isFB){const t=CE2.n.userAgent;for(let e=0,s=["FBSN","FBAN","FBAV"];e<s.length;e++){const i=s[e];if(t.indexOf(i)>-1){CE2.state._isFB=!0;break}}CE2.state._isFB||(CE2.state._isFB=!1)}return CE2.state._isFB},zt=function(t,e){const s=t[e];return function(){try{for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return s.apply(t,i)}catch(t){}}},Jt=function(t,e){if(t==e)return!0;if("function"==typeof t.contains)return t.contains(e);let s=e;do{s=s.parentNode}while(s&&s!=document.body&&s!=t);return s==t},Zt=function(t,e){let s,i;if(t&&t.length)for(s=0;i=t[s++];)if(Jt(i,e))return i},te=function(t,e){const s=CE2.fp.scroll(e);return[t.clientX+s.left,t.clientY+s.top]},ee=function(t){const e="key_"+ +new Date;try{const s=t.contentWindow;s[e]="temp";const i="temp"===s[e];return i&&delete s[e],i}catch(t){return!1}},se=function(t){return"string"==typeof t.tagUrn&&t.tagUrn.indexOf("vml")>=0},ie=(t,e)=>{if(!e.length)return;const s=[];s.push(`u=${encodeURIComponent(t.userId)}`),s.push(`st=${encodeURIComponent(t.siteId)}`),t.snapshotId&&s.push(`s=${encodeURIComponent(t.snapshotId)}`),t.flow&&s.push(`f=${encodeURIComponent(t.flow)}`),t.sessionId&&s.push(`ss=${encodeURIComponent(t.sessionId)}`),t.pageFingerprintMd5&&s.push(`p=${encodeURIComponent(t.pageFingerprintMd5)}`),t.goalId&&s.push(`g=${encodeURIComponent(t.goalId)}`),CE2.data.tracking_key&&s.push(`tk=${encodeURIComponent(CE2.data.tracking_key)}`);const i=[];for(let t=0;t<e.length;t++){const s=e[t];(0,et.debug2)(`Tracker event ${(0,tt.descriptiveEventType)(s[0][2])} visit=${s[1][0]||s[0][0]} `,s),i.push(Kt.Y.stringify(s))}const r=`${CE2.data.v11_tracking_dest}?${s.join("&")}`;if(CE2.n.userAgent.includes("baiduboxapp")){const t=i.join("\n");(0,tt.send)(r,t,{sendBeacon:!1})}else{const t=(t=>{if("string"==typeof t)return Ft(Gt(t));if(!ArrayBuffer.isView(t))throw new Error("Data must be UInt* data type or string");return Ft(t)})(i.join("\n"));(0,tt.send)(r,t,{contentType:"application/gzip",sendBeacon:!1})}};var re=s(8786);const ne="gtrk.cnv",oe="gtrk.la",ae={get(t){return CE2.cookieStorage.get(t)},set(t,e){return CE2.cookieStorage.set(t,e)},del(t){return CE2.cookieStorage.del(t)},reset(){this.del(ne),this.del(oe)},alive(){this.isExpired()&&this.reset(),this.set(oe,(+new Date).toString(36))},isExpired(){const t=parseInt(this.get(oe),36);return!!t&&new Date-t>18e5},getConvertedIds(){if(this.isExpired())return[];const t=this.get(ne);return t?t.split(",").map((t=>parseInt(t,36))).filter((t=>!Number.isNaN(t))):[]},recordConversion(t){if("number"!=typeof t||Number.isNaN(t))return;const e=this.getConvertedIds();e.includes(t)||(re.Z.emit("complete",{goal:{id:t}}),e.push(t),this.set(ne,e.map((t=>t.toString(36))).join(",")))},alreadyConverted(t){return this.getConvertedIds().includes(t)}};var ce=s(598),le=s(4212);class he{constructor(){this.trackURL=CE2.data.v11_tracking_dest,this.visitor=CE2.visitorTracker,this.eventHandlers={},this.bufferQueue=[],this.bufferQueueTimeout,this.virtual=!1,this.url=window.location.href,this.setVisitorIDs(),this.setVisitIDs()}makeId(){return(0,le.qR)(0,1)}setVisitIDs(){this.visitID=this.makeId()}setVisitorIDs(){var t;this.visitor.getId()&&this.visitor.getStoredId()&&this.visitor.getId()!==this.visitor.getStoredId()&&(null===(t=this.resetSessionTracking)||void 0===t||t.call(this));this.visitorID=this.visitor.getId(),this.visitorIdentification=this.visitor.getIdentification()}identify(t){if(!this.session||!t)return;this.visitor.identify(t),this.visitorIdentification=t;const e=[t],s=this.newEvent(ws.IDENTIFY,{attributes:e});this.send(s)}clearIdentity(){this.visitorIdentification=null,this.visitor.clearIdentity()}updateWorth(t,e){if(!this.session||isNaN(t))return;const s=[this.visitID,t];e&&3===e.length&&s.push(e.toUpperCase());const i=this.newEvent(ws.SESSION_WORTH,{attributes:s});this.send(i)}getUserData(){const t=[],{userData:e}=CE2;return(0,ce.S6)([1,2,3,4,5],(s=>{const i=e[s];void 0!==i&&t.push(String(s),i)})),t}sendCustomUserData(){const t=[CE2.userData[1],CE2.userData[2],CE2.userData[3],CE2.userData[4],CE2.userData[5]],e=this.newEvent(ws.CUSTOM_USER_DATA,{attributes:t});this.send(e)}newEvent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.attributes||[];for(let t=0;t<s.length;t++)void 0===s[t]&&(s[t]="");const i=[[e.eventID||this.makeId(),this.visitorID,t,this.version,e.timestamp||+new Date,CE2.tabId],s],r=this.getUserData();return r.length>0&&i.push(r),i}sendTag(t){if(this.session&&t){const e=[t],s=this.newEvent(ws.TAG,{attributes:e});this.send(s)}}addTag(t){const e=Array.isArray(t)?t:[t];for(let t=0;t<e.length;t++){const s=e[t];this.sendTag(s)}}addEventListener(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;this.eventsTargets||(this.eventsTargets=new Map);let i=this.eventsTargets.get(s);i||(i=new Map,this.eventsTargets.set(s,i));let r=i.get(t);r||(r={hooks:[]},r.handler=function(){for(let t=0,e=r.hooks;t<e.length;t++){(0,e[t])(...arguments)}},i.set(t,r),(0,ce.oL)(s,t,r.handler)),r.hooks.push(e)}processBuffer(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];do{const t=this.bufferQueue.splice(0,10);ie(this.buildTrackerOptions(),t)}while(this.bufferQueue.length);const e=zt(this,"processBuffer");t&&(this.bufferQueueTimeout=setTimeout((()=>{e(t)}),2e3))}buildTrackerOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.userId=CE2.data.uid,t.siteId=this.site.id,t.snapshotId=this.snapshotId,t.sessionId=this.sessionId,t.pageFingerprintMd5=this.pageFingerprintMd5,t}setupPageHideHandler(){this.addEventListener("visibilitychange",(()=>{"visible"!==document.visibilityState&&this.onPageHide&&this.onPageHide()}))}}var ue=s(9042),de=s(2218);class pe{constructor(t){CE2BH.defineProperty(this,"ACTIVITY_WINDOW",1e4),CE2BH.defineProperty(this,"INACTIVE_TIME_LIMIT",9e4),this.tracker=t,this.trigger()}update(){this.trigger()}trigger(){const t=+new Date;if(this.lastActive){const e=t-this.lastActive;if(e>this.INACTIVE_TIME_LIMIT){const t=[this.tracker.visitID,e],s=this.tracker.newEvent(ws.INACTIVE,{attributes:t});this.tracker.send(s,{timestamp:this.lastActive})}}const e=this.lastActive&&t-this.lastActive;e&&e<=this.ACTIVITY_WINDOW||(this.lastActive=t,this.tracker.session&&this.tracker.session.alive())}}class fe{constructor(t){this.tracker=t,this.opaqueElement=null,this.lastClicked=null,this.ignoredElements=CE2.state.ignoredElements.concat([...CE2.d.body.getElementsByClassName("-ce-ignore")]),this.tracker.addEventListener("mousedown",zt(this,"onClick")),this.tracker.addEventListener("change",zt(this,"onChange"));for(let t=0,e=CE2.d.querySelectorAll("OBJECT, EMBED");t<e.length;t++){const s=e[t],i=J.getBox(s);i.width>1&&i.height>1&&(this.tracker.addEventListener("mouseover",zt(this,"onOver"),s),this.tracker.addEventListener("mouseout",zt(this,"onOut"),s))}for(let t=0,e=CE2.d.querySelectorAll("FRAME, IFRAME");t<e.length;t++){const s=e[t];if(ee(s))this.tracker.addEventListener("mousedown",zt(this,"onClickFrame"),CE2.ieVersion<9?s.contentWindow.document:s.contentWindow);else{const t=J.getBox(s);t.width>1&&t.height>1&&(this.tracker.addEventListener("mouseover",zt(this,"onOver"),s),this.tracker.addEventListener("mouseout",zt(this,"onOut"),s))}}this.tracker.addEventListener("blur",zt(this,"onBlur")),this.tracker.addEventListener(CE2.opera?"unload":"beforeunload",zt(this,"onUnload"))}cleanup(){delete this.lastClicked,delete this.lastClickedTime,delete this.ignoredElements}onChange(t){if(t.target&&"SELECT"===t.target.tagName){this.tracker.onActivity();for(let e=0,s=t.target.querySelectorAll("option");e<s.length;e++){const t=s[e];t.selected&&this.click(t,null,null,"l")}}}onClick(t,e){this.tracker.onActivity();const s=this.mouseButton(t);if(e){const e=function(t){return t.source||t.view||t.srcElement.ownerDocument.parentWindow}(t),i=e.frameElement;this.click(...[i].concat(te(t,e)).concat(s,t))}else{const e=this.tracker.formatVersion>=13?Wt(t):t.srcElement||t.target;if("OPTION"===e.tagName&&e.parentElement&&"SELECT"===e.parentElement.tagName)return;this.click(e,null,null,s,t)}}onBlur(){const t=this.opaqueElement;t&&t!==this.lastClicked&&(this.click(t),this.opaqueElement=null)}onUnload(){const t=this.opaqueElement;t&&this.isIgnored(t)&&(this.click(t),this.opaqueElement=null)}onClickFrame(t){this.onClick(t,!0)}onOver(t){const e=t.srcElement||t.target;this.isIgnored(e)||(this.opaqueElement=e)}onOut(t){this.isIgnored(t.srcElement||t.target)||(this.opaqueElement=null)}click(t,e,s,i,r){if(this.isTopLevelElement(t)||this.isIgnored(t))return;if(t=this.tracker.getElementToRecord(t),se(t))return;const n=this.tracker.getFingerprint(t),o=this.getClickPosition(e,s,n,r);o.button=i,"l"===i&&(o.clickType=this.getClickType(r)),this.lastClicked=t;const a=[this.tracker.visitID,...this.tracker.getFingerprintAttributes(n),o.x,o.y,o.button,o.pageX,o.pageY,o.clickType],c=this.tracker.newEvent(ws.CLICK,{attributes:a});this.tracker.send(c)}getClickPosition(t,e,s,i){let r;const n={x:t||0,y:e||0,pageX:0,pageY:0};return i&&(i.srcElement||i.target)?(t||(r=te(i),n.x=r[0]-s.pageX,n.y=r[1]-s.pageY),n.pageX=i.pageX,n.pageY=i.pageY):t&&e?(n.x=t,n.y=e):i||(n.x=n.pageX=s.width/2,n.y=n.pageY=s.height/2),n}getClickType(t){if(!t)return"";const e=Wt(t),s=this.isClickableElement(e);let i="";return s||(i+=bs.NOT_CLICKABLE),this.rageClick(t,e,s)&&(i+=bs.RAGE,this.tracker.rageClick()),s&&this.authenticationButton(e)&&(i+=bs.AUTH_BUTTON),i||void 0}rageClick(t,e,s){if(!t)return!1;if(t.timeStamp===this.lastEventTimeStamp)return this.lastRageValue;let i=!1;if(t.detail>2)i=!0;else if(this.lastClickedTime){const r=+new Date-this.lastClickedTime;(s&&this.lastClickedElement===e&&2!==t.detail||!s)&&r<3e3&&(i=!0)}return this.lastClickedTime=+new Date,this.lastEventTimeStamp=t.timeStamp,this.lastRageValue=i,this.lastClickedElement=e,i}authenticationButton(t){if(t.innerText){const e=t.innerText.trim().toLowerCase(),s=["sign in with","register with","authorize","join with"].some((t=>new RegExp(`^${t}`).test(e)));return!!s||["sign in","signin","signup","sign up","register","login","create account","register account","join","join us"].some((e=>e===t.innerText.trim().toLowerCase()))}}isClickableElement(t){const e=["a","a *","button","button *","input","option","select"].join(",");if((0,ce.Ku)(t,e))return!0;const s=getComputedStyle(t);return"pointer"===s.cursor||"text"===s.cursor||"underline"===s.textDecoration}mouseButton(t){let e;return e=CE2.ieVersion&&(CE2.ieVersion<9||CE2.ieQuirksMode)?{1:"l",2:"r",4:"m"}:{0:"l",1:"m",2:"r"},e[t.button]}isTopLevelElement(t){return t===document||t===document.body||t===document.documentElement}isIgnored(t){return Zt(this.ignoredElements,t)}}class ge{constructor(t){CE2BH.defineProperty(this,"CHECKOUT_STARTED_KEY","ceeccs"),CE2BH.defineProperty(this,"eventTypes",{ADD_TO_CART:1,CHECKOUT_STARTED:2,CHECKOUT_COMPLETED:3}),this.tracker=t,this.tracker.addEventListener("mousedown",(t=>{"l"===this.tracker.eventHandlers.click.mouseButton(t)&&this.onClick&&this.onClick(t)})),setTimeout(zt(this,"update"))}setCheckoutStarted(){CE2.cookieStorage.set(this.CHECKOUT_STARTED_KEY,1)}getCheckoutStarted(){return"1"===CE2.cookieStorage.get(this.CHECKOUT_STARTED_KEY)}delCheckoutStarted(){CE2.cookieStorage.del(this.CHECKOUT_STARTED_KEY)}isCheckoutStarted(){return!this.getCheckoutStarted()&&this.CHECKOUT_STARTED_PATH_REGEXP&&this.CHECKOUT_STARTED_PATH_REGEXP.test(CE2.w.location.pathname)}isCheckoutCompleted(){return this.getCheckoutStarted()&&this.CHECKOUT_COMPLETED_PATH_REGEXP&&this.CHECKOUT_COMPLETED_PATH_REGEXP.test(CE2.w.location.pathname)}update(){this.isCheckoutStarted()&&this.checkout(),this.isCheckoutCompleted()&&this.checkoutCompleted()}checkout(){this.setCheckoutStarted(),this.sendCheckoutStartedEvent()}checkoutCompleted(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.delCheckoutStarted(),this.sendCheckoutCompletedEvent(t)}sendCheckoutStartedEvent(){this.sendEvent([this.eventTypes.CHECKOUT_STARTED])}sendCheckoutCompletedEvent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.sendEvent([this.eventTypes.CHECKOUT_COMPLETED,...t])}addToCart(t){this.delCheckoutStarted(),this.sendEvent([this.eventTypes.ADD_TO_CART,...t])}sendEvent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=[this.tracker.visitID,...t];const e=this.tracker.newEvent(CE2.V11Tracker.eventTypes.ECOMMERCE,{attributes:t});this.tracker.send(e)}}class me extends ge{constructor(){super(...arguments),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout(s)?\//i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/checkout(s)?\/.*thank(_|-)?you/i)}onClick(t){const{target:e}=t;if((0,ce.Ku)(e,'.single_add_to_cart_button, [class*="add_to_cart"], [class*="add-to-cart"]')||/^\s*(add to (cart|bag|basket)|buy now)\s*$/i.test(e.innerText||e.value)){let t=[];const e=me.getProduct();if(e)try{const s=CE2.d.querySelector("input.qty"),i=e.offers&&(e.offers[0]||e.offers);this.currency=i&&i.priceCurrency,t=[e.sku||e["@id"],e.name,s&&s.value,i&&(i.price||i.lowPrice||i.hightPrice),i&&i.priceCurrency]}catch(t){(0,Z.f)("error extracting product data",t)}this.addToCart(t)}}static getProduct(){for(let t=0,e=CE2.d.querySelectorAll('script[type="application/ld+json"]');t<e.length;t++){const s=e[t];try{const t=JSON.parse(s.textContent.trim());if(t){if("Product"===t["@type"])return t;if(t["@graph"]instanceof Array){const e=t["@graph"].find((t=>"Product"===t["@type"]));if(e)return e}}}catch(t){(0,Z.f)("error extracting product data",t)}}}sendCheckoutCompletedEvent(){const t=CE2.d.querySelector(".order"),e=CE2.d.querySelector(".total");this.sendEvent([this.eventTypes.CHECKOUT_COMPLETED,me.getValue(t&&t.innerText),me.getValue(e&&e.innerText),this.currency]),CE2.updateWorth(me.getValue(e&&e.innerText),this.currency)}static getValue(t){return t&&(t.indexOf(":")>-1?t.split(":")[1].trim():t)}static match(){return Object.keys(CE2.w).find((t=>/^wc_.*_params$/.test(t)))}}class Ee extends ge{constructor(){super(...arguments),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout(s)?\//i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/checkout(s)?\/.*success/i)}onClick(t){const{target:e}=t;if((0,ce.Ku)(e,'#product-addtocart-button, [class*="add_to_cart"], [class*="add-to-cart"]')||/^\s*(add to (cart|bag|basket)|buy now)\s*$/i.test(e.innerText||e.value)){let t=[];const s=Ee.getProduct(e);this.currency=s.priceCurrency,s&&(t=[s.id,s.name,s.qty,s.price,s.priceCurrency]),this.addToCart(t)}}static getProduct(t){const e={};try{const s=t.closest(".product-info-main");e.name=CE2.d.querySelector(".page-title")&&CE2.d.querySelector(".page-title").innerText,e.qty=s.querySelector("input.qty")&&s.querySelector("input.qty").value,e.id=s.querySelector('input[name="product"]')&&s.querySelector('input[name="product"]').value,e.price=s.querySelector('[itemprop="price"]')&&(s.querySelector('[itemprop="price"]').getAttribute("content")||s.querySelector('[itemprop="price"]').innerText),e.priceCurrency=s.querySelector('[itemprop="priceCurrency"]')&&s.querySelector('[itemprop="priceCurrency"]').getAttribute("content")}catch(t){(0,Z.f)("error extracting product data",t)}return e}sendCheckoutCompletedEvent(){const t=CE2.d.querySelector(".order-number"),e=CE2.d.querySelector(".grand_total .amount");this.sendEvent([this.eventTypes.CHECKOUT_COMPLETED,t&&t.innerText,e&&e.innerText,this.currency]),CE2.updateWorth(e&&e.innerText,this.currency)}static match(){return CE2.w.checkout&&CE2.w.checkout.checkoutUrl&&CE2.w.checkout.websiteId||[...document.scripts].find((t=>t.src&&t.src.indexOf("Magento")>-1))||[...document.querySelectorAll("link")].find((t=>t.href&&t.href.indexOf("Magento")>-1))}}const ve={shopify:class extends ge{constructor(){super(...arguments),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout(s)?\//i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/checkout(s)?\/.*thank(_|-)?you/i),CE2.w.ShopifyAnalytics.lib.integrations.push({isEssential(){return!0},track:async t=>{await this.onEvent(t)}})}update(){super.update(),this.updateWorth()}async updateWorth(){try{await fetch(CE2.w.Shopify.routes.root+"cart.js").then((t=>t.json())).then((t=>{this.total_price!=t.total_price&&(this.total_price=t.total_price,CE2.updateWorth(t.total_price,t.currency))}))}catch(t){CE2.debug("error fetching cart value",t)}}async onEvent(t){let e=[];if(t&&"Added Product"===t.event){const{productId:s,name:i,quantity:r,price:n,currency:o}=t.properties||{};e=[s,i,r,n,o],this.addToCart(e),await this.updateWorth()}}sendCheckoutCompletedEvent(){const t=CE2.w.Shopify&&CE2.w.Shopify.checkout||{};this.sendEvent([this.eventTypes.CHECKOUT_COMPLETED,t.order_id,t.total_price,t.currency]),this.total_price=t.total_price,CE2.updateWorth(t.total_price,t.currency)}static match(){return CE2.w.Shopify&&Yt(CE2.w,"ShopifyAnalytics.lib.integrations")}},woocommerce:me,magento:Ee,wix:class extends ge{constructor(){super(...arguments);const t=CE2.w.location.host,e=this.onEvent.bind(this);CE2.w.CE2_WIX_API_TESTING?CE2.w.wixDevelopersAnalytics.register(t,e):CE2.w.addEventListener("wixDevelopersAnalyticsReady",(()=>{CE2.w.wixDevelopersAnalytics.register(t,e)}))}onEvent(t,e){if("AddToCart"===t){const t=[e.sku,e.name,e.quantity,e.price,e.currency];this.addToCart(t)}"InitiateCheckout"===t&&this.checkout(),"Purchase"===t&&(this.checkoutCompleted([e.orderId,e.revenue,e.currency]),CE2.updateWorth(e.revenue,e.currency))}static match(){return!!CE2.w.fedops}},squarespace:class extends ge{constructor(){super(...arguments),CE2BH.defineProperty(this,"CHECKOUT_STARTED_PATH_REGEXP",/\/checkout\?cartToken/i),CE2BH.defineProperty(this,"CHECKOUT_COMPLETED_PATH_REGEXP",/\/website\/thank-you-page/i),CE2BH.defineProperty(this,"ADD_TO_CART_BUTTON_NAME_PATTERN",/add to (cart|bag|basket)/i),CE2BH.defineProperty(this,"CHECKOUT_BUTTON_NAME_PATTERN",/checkout/i),CE2BH.defineProperty(this,"getProductData",(()=>{const t=CE2.d.querySelectorAll('script[type="application/ld+json"]'),e=CE2.d.querySelector(".product-variants[data-selected-variant]");if(!e)return(0,Z.f)("Variants not found"),null;const s=JSON.parse(e.getAttribute("data-selected-variant"));if(s)for(let e=0;e<t.length;e++){const i=t[e],r=JSON.parse(i.textContent);if(r.offers){const t=CE2.d.querySelector(".product-quantity-input input");return this.currency=Yt(s,"priceMoney.currency"),[s.sku,r.name,t&&parseInt(t.value,10),jt(Yt(s,"priceMoney.value")),this.currency]}}}))}onClick(t){const{target:e}=t;if((t=>(0,ce.Ku)(t,".sqs-add-to-cart-button-inner"))(e)&&(t=>this.ADD_TO_CART_BUTTON_NAME_PATTERN.test(t.innerText||t.value))(e))return this.processAddToCardAction();(t=>this.CHECKOUT_BUTTON_NAME_PATTERN.test(t.innerText||t.value))(e)&&!this.getCheckoutStarted()&&this.checkout()}processAddToCardAction(){try{const t=this.getProductData();t&&this.addToCart(t)}catch(t){(0,Z.f)("error extracting product data",t)}}static match(){return CE2.w.SQUARESPACE_ROLLUPS||Object.keys(CE2.w).find((t=>t.includes("__INITIAL_SQUARESPACE")))}}};let Ce;for(let t=0,e=Object.entries(ve);t<e.length;t++){const[s,i]=e[t];if(i.match()){Ce=i,(0,Z.f)(`Tracker: ${s} site detected`);break}}const ke="<unknown>",ye=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Te=/\((\S*)(?::(\d+))(?::(\d+))\)/;const be=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;const we=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Se=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;const _e=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;const Ie=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Ae(t){return t.split("\n").reduce(((t,e)=>{const s=function(t){const e=ye.exec(t);if(!e)return null;const s=e[2]&&0===e[2].indexOf("native"),i=e[2]&&0===e[2].indexOf("eval"),r=Te.exec(e[2]);return i&&null!=r&&(e[2]=r[1],e[3]=r[2],e[4]=r[3]),{file:s?null:e[2],methodName:e[1]||ke,arguments:s?[e[2]]:[],lineNumber:e[3]?+e[3]:null,column:e[4]?+e[4]:null}}(e)||function(t){const e=be.exec(t);return e?{file:e[2],methodName:e[1]||ke,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}(e)||function(t){const e=we.exec(t);if(!e)return null;const s=e[3]&&e[3].indexOf(" > eval")>-1,i=Se.exec(e[3]);return s&&null!=i&&(e[3]=i[1],e[4]=i[2],e[5]=null),{file:e[3],methodName:e[1]||ke,arguments:e[2]?e[2].split(","):[],lineNumber:e[4]?+e[4]:null,column:e[5]?+e[5]:null}}(e)||function(t){const e=Ie.exec(t);return e?{file:e[2],methodName:e[1]||ke,arguments:[],lineNumber:+e[3],column:e[4]?+e[4]:null}:null}(e)||function(t){const e=_e.exec(t);return e?{file:e[3],methodName:e[1]||ke,arguments:[],lineNumber:+e[4],column:e[5]?+e[5]:null}:null}(e);return s&&t.push(s),t}),[])}class Oe{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cached_assets=new Set;for(let e=0;e<t.length;e++){const s=t[e];this.cached_assets.add(s)}}add(t){this.cached_assets.add((0,de.F)(t))}test(t){return this.cached_assets.has((0,de.F)(t))}items(){const t=[];return this.cached_assets.forEach((e=>t.push(e))),t}}class Re{constructor(t){this.tracker=t,this.setupCache(),this.setupQueue(),"undefined"!=typeof CE_ERROR_TRACKING_CONFIG&&CE_ERROR_TRACKING_CONFIG.app_version&&(this.appVersion=CE_ERROR_TRACKING_CONFIG.app_version),"undefined"!=typeof CE_ERROR_TRACKING_CONFIG&&CE_ERROR_TRACKING_CONFIG.delay_time?this.delayTime=CE_ERROR_TRACKING_CONFIG.delay_time:this.delayTime=1e4,"undefined"!=typeof CE_ERROR_TRACKING_CONFIG&&CE_ERROR_TRACKING_CONFIG.fingerprint?this.fingerprint=CE_ERROR_TRACKING_CONFIG.fingerprint:this.fingerprint=(t,e)=>{const s=[];return s.push(`${e.name}`),e.file&&s.push(`[${e.file}:${e.lineno}:${e.colno}]`),s.join(" ")},this.tracker.addEventListener("error",zt(this,"onError")),this.tracker.addEventListener("unhandledrejection",zt(this,"onError"))}static removeFingerprintFrom(t){if(!t)return t;if(t.replace(".js","").match(/^([0-9]+([\-|\.|\_])?)+$/))return t;return t.split(/([a-z0-9]+[\-|\.|\_]+)/i).filter((t=>{if(!t)return!1;const e=t.replace(/[^0-9]/g,"").length,s=t.replace(/[\.\-\_]/,"").length,i=e===s;return!!(i&&e<=3)||!(e/s>.15||i)})).join("").replace(/[\-\.\_]js$/,".js")}update(){this.setupQueue(),this.setupCache()}onError(t){try{let e;if(e="Script error."===t.message?this.buildBaseError(t,t.reason,null,"CrossOrigin Error"):t.error?this.buildBaseError(t,t.error):t.promise?this.buildBaseError(t,t.reason,"UnhandledPromise ->"):this.buildBaseError(t),this.cache.test(e.fingerprint))return;this.bufferQueue.push({timestamp:+new Date,errorAttributes:e}),this.cache.add(e.fingerprint)}catch(e){(0,Z.f)(e),(0,Z.f)(t)}}setupCache(){this.cache=new Oe}setupQueue(){this.bufferQueueTimeout&&clearTimeout(this.bufferQueueTimeout),this.bufferQueue=[],this.processQueue(!0)}processQueue(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(;this.bufferQueue.length>0;){const{timestamp:t,errorAttributes:i}=this.bufferQueue[0];if(!e&&+new Date-t<this.delayTime)break;const r=[this.tracker.visitID,i.name,i.message,i.filename,i.lineno,i.colno,i.stack,i.appVersion,i.fingerprint,i.url,i.uuid,i.bounced||s,i.rageClicked],n=this.tracker.newEvent(ws.ERROR,{timestamp:t,attributes:r});this.tracker.send(n),this.bufferQueue.shift()}if(t){const e=zt(this,"processQueue");this.bufferQueueTimeout=setTimeout((()=>{e(t)}),this.delayTime)}}flush(t){this.processQueue(!1,!0,t)}assignAttribute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rageClicked";this.bufferQueue.forEach((e=>{e.errorAttributes[t]=!0}))}buildBaseError(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r=CE2BH.extends({},this.parseErrorFileAttributes(t,e),this.parseErrorMessageAttributes(t,e,i));return r.uuid=CE2.uuid_v1(),r.appVersion=this.appVersion,r.url=CE2.w.location.href,r.name=s?`${s} ${r.name}`:r.name,r.fingerprint=t.fingerprint||this.fingerprint(t,r),r.rageClicked=!1,r.bounced=!1,r}parseErrorFileAttributes(t,e){let s={};if(t.filename)s={filename:t.filename,lineno:t.lineno,colno:t.colno,stack:e&&e.stack&&e.stack.toString()};else if(e&&e.stack)try{const t=Ae(e.stack);t.length>=1&&(s={filename:t[0].file,lineno:t[0].lineNumber,colno:t[0].column,stack:e.stack.toString()})}catch(t){(0,Z.f)(t)}if(s.filename&&0!==s.filename.indexOf("blob:"))if(this.isValidFileUrl(s.filename)){const t=new CE2.URL(s.filename),e=new CE2.URL(CE2.w.location.href);if(t.path!==e.path){let e=t.path;"/"!==t.path&&"/"===t.path[t.path.length-1]&&(e=t.path.slice(0,t.path.length-1)),s.file="/"!==e?e.split("/").pop():e}}else s.file="unknown";return s.file=Re.removeFingerprintFrom(s.file),s}parseErrorMessageAttributes(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i={};if(e&&e.message){const t=e.message.replace(/^Uncaught /,"");i.message=e.name?`${e.name}: ${t}`:t}else if(e)i.message=e;else if(t.message)i.message=t.message.replace(/^Uncaught /,"");else if(t.target){const e=["Error on"];t.target.tagName&&e.push(t.target.tagName),t.target.src&&e.push(t.target.src!==CE2.w.location.href?t.target.src:"Empty src attribute"),i.message=e.join(" "),i.name="Unknown Resource Error"}return i.message||(i.message="Unknown Error"),s?i.name=s:i.name||(i.name=function(t){if(t.length<=50)return t.trim();const e=t.trim().split(" ");for(let t=1;t<=e.length;t++){const s=e.slice(0,t).join(" ");if(s.length<=50)continue;const i=t===e.length;return s.trim()+(i?"":" ...")}return t.trim()}(i.message)),i}isValidFileUrl(t){try{if(window.URL)return!!new window.URL(t)}catch(t){(0,Z.f)(t)}}}const Ne=[[.4,.4],[.5,.4],[.5,.5],[.4,.5],[.3,.5],[.3,.4],[.3,.3],[.4,.3],[.5,.3],[.6,.3],[.6,.4],[.6,.5],[.6,.6],[.5,.6],[.4,.6],[.3,.6],[.2,.6],[.2,.5],[.2,.4],[.2,.3],[.2,.2],[.3,.2],[.4,.2],[.5,.2],[.6,.2],[.7,.2],[.7,.3],[.7,.4],[.7,.5],[.7,.6],[.7,.7],[.6,.7],[.5,.7],[.4,.7],[.3,.7],[.2,.7],[.1,.7],[.1,.6],[.1,.5],[.1,.4],[.1,.3],[.1,.2],[.1,.1],[.2,.1],[.3,.1],[.4,.1],[.5,.1],[.6,.1],[.7,.1],[.8,.1],[.8,.2],[.8,.3],[.8,.4],[.8,.5],[.8,.6],[.8,.7],[.8,.8],[.7,.8],[.6,.8],[.5,.8],[.4,.8],[.3,.8],[.2,.8],[.1,.8],[0,.8],[0,.7],[0,.6],[0,.5],[0,.4],[0,.3],[0,.2],[0,.1],[0,0],[.1,0],[.2,0],[.3,0],[.4,0],[.5,0],[.6,0],[.7,0],[.8,0],[.9,0],[.9,.1],[.9,.2],[.9,.3],[.9,.4],[.9,.5],[.9,.6],[.9,.7],[.9,.8],[.9,.9],[.8,.9],[.7,.9],[.6,.9],[.5,.9],[.4,.9],[.3,.9],[.2,.9],[.1,.9],[0,.9]],De=`cedk${Math.random().toString().replace(/\D/g,"")}`;function Le(t,e,s){if(!t||!t.nodeName)return!1;if(t==CE2.d||t==CE2.d.documentElement||t==CE2.d.body)return!1;if(se(t))return!1;if(s){if(!function(t){let e;if(t[De])return!1;for(;t&&t!=CE2.d&&t!=CE2.d.documentElement&&t!=CE2.d.body;t=t.parentNode)if(e=CE2.w.getComputedStyle(t),e&&("absolute"==e.position||"fixed"==e.position))return!(t[De]=!0);return!0}(t))return!1;if(J.getBox(t).height>2*e.height)return!1}return!0}function Pe(t,e,s){const i=CE2.d.elementFromPoint(t+s.left,e+s.top);return i.nodeType===i.TEXT_NODE?i.parentNode:i}function He(t,e){return CE2.d.elementFromPoint(t,e)}let Ue=function(){if(CE2.d.elementFromPoint)return Ue=CE2.webkit&&CE2.webkitVersion<533||CE2.opera&&CE2.operaVersion<10?Pe:He,Ue(...arguments)};class Me{constructor(){this.strictAnchorSearch=!0,this.lastRecordedScroll=null,this.lastRecordedTime=0,this.lastRecordedY=0,this.idleAt=null,this.idleSince=(new Date).getTime()}shouldRecordScroll(t){const e=t.top,s=t.height,i=`${e}:${s}`,r=(new Date).getTime();if(i==this.lastRecordedScroll)return!1;if(i==this.idleAt){if(r-this.idleSince>=800)return this.lastRecordedScroll=i,this.lastRecordedTime=r,this.lastRecordedY=e,!0}else this.idleAt=i,this.idleSince=r;return null==this.lastRecordedScroll||Math.abs(e-this.lastRecordedY)>s/2&&r-this.lastRecordedTime>=1600?(this.lastRecordedScroll=i,this.lastRecordedTime=r,this.lastRecordedY=e,!0):void 0}findAnchor(t,e){if(!CE2.d.elementFromPoint)return e(t);const s=this;let i=0,r=this.strictAnchorSearch;const{width:n}=t,{height:o}=t;let a,c,l,h;const u=function(){if(a=Ne[i++]){if(l=(a[0]+.1*Math.random())*n,h=(a[1]+.1*Math.random())*o,c=Ue(l,h,t),Le(c,t,r))return e(t,c);setTimeout(u,0)}else i=0,s.strictAnchorSearch=r=!1,setTimeout(u,0)};setTimeout(u,0)}}CE2.EXCESSIVE_SCROLL_TIMEOUT=3e3;class Be{constructor(t){this.tracker=t,this.timeout=CE2.EXCESSIVE_SCROLL_TIMEOUT,this.isTriggered=!1,this.isScrolledDown=!1,this.scrollTracker=new Me,this.viewport=null,setTimeout(zt(this,"cleanup"),this.timeout),this.trackScrollInterval=setInterval(zt(this,"trackScroll"),500),this.foundAnchorBind=zt(this,"foundAnchor")}cleanup(){clearInterval(this.trackScrollInterval),this.isTriggered=!1,this.isScrolledDown=!1,this.viewport=null,delete this.scrollTracker,delete this.foundAnchorBind}trackScroll(){const t=J.scroll();this.scrollTracker.findAnchor(t,this.foundAnchorBind)}foundAnchor(t,e){if(this.isTriggered)return;const s=this.anchorViewport(t,e),i=s.viewportTop/s.viewportHeight*100;this.isScrolledDown?i<=80&&(this.sendEvent(this.viewport),this.isTriggered=!0):i>90&&(this.viewport=s,this.isScrolledDown=!0)}anchorViewport(t,e){const s=t.top,i=t.height;let r,n,o;return e&&(e=this.tracker.getElementToRecord(e),r=this.tracker.getFingerprint(e),n=t.top-r.pageY,o=t.top+t.height-r.pageY),{viewportTop:s,viewportHeight:i,viewportTopDistance:n,viewportBottomDistance:o}}sendEvent(t){let{viewportTop:e,viewportHeight:s,viewportTopDistance:i,viewportBottomDistance:r}=t;const n=[this.tracker.visitID,e,s,i,r],o=this.tracker.newEvent(ws.EXCESSIVE_SCROLL,{attributes:n});this.tracker.send(o),this.tracker.addTag("excessive scroll")}}var xe=s(1278);const Ve="ce_submit_forms";function Fe(t,e){const s=t[e];return"string"==typeof s?s:t.getAttribute(e)}class $e{static formAttributes(t){return[Fe(t,"id"),Fe(t,"name"),new CE2.NativeURL(Fe(t,"action"),CE2.w.location.href).toString()]}static validateEmail(t){const e=document.createElement("input");return e.type="email",e.required=!0,e.value=t,"function"==typeof e.checkValidity?e.checkValidity():/\S+@\S+\.\S+/.test(t)}constructor(t){CE2BH.defineProperty(this,"EMAIL_ATTRIBUTE_REGEX",/e([-_])?mail/i),CE2BH.defineProperty(this,"FORM_REGEX",/sign([-_\s])?up|checkout|log([-_\s])?in|sign([-_\s])?in/i),CE2BH.defineProperty(this,"eventTypes",{SUBMIT:1,RESUBMIT:2,ABANDON:3,SIGNUP:4,LOGIN:5,EMAIL:6,SEARCH:7}),this.tracker=t,this.tracker.addEventListener("mousedown",(t=>{"l"===this.tracker.eventHandlers.click.mouseButton(t)&&this.onClick(t)})),CE2.data.auto_identity&&!CE2.IDENTIFIER&&(CE2.w.ShopifyAnalytics&&Yt(CE2.w,"ShopifyAnalytics.meta.page.customerId")&&(0,xe.yV)(ShopifyAnalytics.meta.page.customerId),this.tracker.addEventListener("blur",zt(this,"onBlur")),this.tracker.addEventListener("submit",zt(this,"onBlur"))),this.tracker.addEventListener("submit",zt(this,"onSubmit")),this.tracker.addEventListener("input",zt(this,"onInput")),this.tracker.addEventListener("beforeunload",zt(this,"beforeUnload")),this.editedForms=[],this.submittedForms=JSON.parse(sessionStorage.getItem(Ve)||"[]")}onClick(t){const{target:e}=t;if(!e)return;const s=e.closest("form");if(s&&"INPUT"===e.tagName&&("button"===e.type||"submit"===e.type)||"BUTTON"===e.tagName){const t="INPUT"===e.tagName?e.value:e.innerText;(/(log\s*in)|(sign\s*in)/i.test(t)||s&&/(log[\-_]in)|(sign[\-_]in)/i.test(s.action))&&this.sendEvent([this.eventTypes.LOGIN]),(/(sign\s*up)|register/i.test(t)||s&&/(sign[\-_\s]up)|register/i.test(s.action))&&this.sendEvent([this.eventTypes.SIGNUP])}"INPUT"!==e.tagName&&"BUTTON"!==e.tagName||"submit"===e.type&&s&&this.submit(s,e)}onSubmit(t){const e=t.target;e&&(e.ce_submit&&+new Date-e.ce_submit<100||this.submit(e))}onBlur(t){try{const{target:e}=t;if(!e||"function"!=typeof e.closest)return;const s=e.closest("form"),i="INPUT"===e.tagName&&e.value&&$e.validateEmail(e.value);s&&this.isAuthForm(s)&&i&&!CE2.IDENTIFIER&&(0,xe.yV)(e.value)}catch(t){CE2.debug("form blur trigger failed",t)}}onInput(t){const{target:e}=t;if(!e)return;const s=e.closest("form");s&&!this.editedForms.includes(s)&&this.editedForms.push(s),s&&!s.ce_time_start&&(s.ce_time_start=+new Date),"INPUT"===e.tagName&&("search"===e.type||e.placeholder&&/search/i.test(e.placeholder))&&(!e.ce_search||+new Date-e.ce_search>3e4)&&(e.ce_search=+new Date,this.sendEvent([this.eventTypes.SEARCH])),"INPUT"===e.tagName&&e.value&&$e.validateEmail(e.value)&&(!e.ce_email_sent||+new Date-e.ce_email_sent>6e4)&&(e.ce_email_sent=+new Date,this.sendEvent([this.eventTypes.EMAIL]))}beforeUnload(){this.editedForms.forEach((t=>{this.sendEvent([this.eventTypes.ABANDON,...$e.formAttributes(t)])})),this.editedForms=[],sessionStorage.setItem(Ve,CE2.JSON.stringify(this.submittedForms))}submit(t){try{const e=this.editedForms.indexOf(t);-1!==e&&this.editedForms.splice(e,1),t.ce_submit=+new Date;const s=$e.formAttributes(t);let i;-1!==this.submittedForms.indexOf(CE2.JSON.stringify(s))?i=this.eventTypes.RESUBMIT:(this.submittedForms.push(CE2.JSON.stringify(s)),i=this.eventTypes.SUBMIT);const r=[i,...s];t.ce_time_start&&(r.push(+new Date-t.ce_time_start),delete t.ce_time_start),this.sendEvent(r)}catch(t){CE2.debug("form submit event failed",t)}}sendEvent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=[this.tracker.visitID,...t];const e=this.tracker.newEvent(ws.FORM,{attributes:t});this.tracker.send(e)}isAuthForm(t){const e=Fe(t,"action"),s=Fe(t,"class"),i=Fe(t,"id"),r=Fe(t,"name");return this.isMatch(e)||this.isMatch(s)||this.isMatch(i)||this.isMatch(r)}isMatch(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.FORM_REGEX;return t&&t.match(e)}}var qe=s(9330);const Ge=(t,e,s,i)=>{if(!s||s.type!==e)return!1;if(!t.on_any_page&&!(0,qe.pI)(t.on_page,CE2.w.location.href))return!1;let r=t[`selector_for_${{1:"desktop",2:"phone",3:"tablet"}[CE2.clock.getDeviceType()]}`];return!!r&&("function"==typeof CE2.fixTriggerSelector&&(r=CE2.fixTriggerSelector(i,r)),!(!r||!(0,ce.Ku)(s.target,r,!0)))};qe.wZ.url_visit=qe.wZ.visited_page,qe.wZ.click=function(t){let{operand:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{event:s,goalId:i}=e;return Ge(t,"mousedown",s,i)},qe.wZ.form_submission=function(t){let{operand:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{event:s,goalId:i}=e;return Ge(t,"submit",s,i)};class Ke{constructor(t){this.tracker=t,this.goals=this.tracker.goals;const e=zt(this,"onClickOrSubmit");this.tracker.addEventListener("mousedown",e),this.tracker.addEventListener("submit",e);const{onActivity:s}=Ke;this.tracker.addEventListener("mousemove",s),this.tracker.addEventListener("scroll",s),this.tracker.addEventListener("keydown",s),this.tracker.addEventListener("pagehide",s)}onClickOrSubmit(t){ae.alive(),this.goals.forEach((e=>{e.triggers.forEach((s=>{const i=s.filter.conditions.filter((t=>"click"===t.criteria||"form_submission"===t.criteria));0!==i.length&&(0,qe.vS)(i,{operand:{event:t,goalId:e.id}})&&this.tracker.goalConversion(e.id,s.id)}))}))}onUrlVisit(){this.goals.forEach((t=>{t.triggers.forEach((e=>{const s=e.filter.conditions.filter((t=>"url_visit"===t.criteria));0!==s.length&&(0,qe.vS)(s)&&this.tracker.goalConversion(t.id,e.id)}))}))}static onActivity(){const t=+new Date;Ke.lastActive&&t-Ke.lastActive<=1e4||(Ke.lastActive=t,ae.alive())}}const Ye=function(){this.metrics={}};Ye.prototype={start(t){this.metrics[t]=+new Date},stop(t){const e=this.metrics[t];if(!e)return void(0,Z.f)(`No starting point for "${t}", ignoring.`);const s=+new Date-e;this.cancel(t),this.send(t,s)},cancel(t){delete this.metrics[t]},send(t,e){if(t.length>100)throw new Error("Key is too long (max 100)");if((e=Number(e,10))&&isNaN(e))throw new Error("Value is NaN");if(!CE2.site)return void(0,Z.f)(`No site, skipping metric ${t}`);const s=[[(0,le.qR)(0,1),this.getTrackerValue("visitorID"),25,CE2.VERSION,+new Date,CE2.tabId],[this.getTrackerValue("visitID"),t,e||"",CE2.visitorTracker.getIdentification()]];ie({userId:CE2.data.uid,siteId:CE2.site.id,snapshotId:this.getTrackerValue("snapshotId"),sessionId:this.getTrackerValue("sessionId"),pageFingerprintMd5:this.getTrackerValue("pageFingerprintMd5")},[s])},getTrackerValue(t){if(CE2.tracker)return CE2.tracker[t]}};const je=new Ye;class We{constructor(t){this.tracker=t,this.tracker.addEventListener(CE2.opera?"unload":"beforeunload",zt(this,"onUnload"))}trigger(t,e){if(t.length>100)throw new Error("Key is too long (max 100)");if((e=Number(e,10))&&isNaN(e))throw new Error("Value is NaN");const s=[this.tracker.visitID,t,e||""],i=this.tracker.newEvent(ws.CUSTOM_PERFORMANCE,{attributes:s});this.tracker.send(i)}onUnload(){if(Object.keys(je.metrics).length)for(let t=0,e=Object.keys(je.metrics);t<e.length;t++){const s=e[t];this.trigger(s)}}}class Xe{constructor(t){CE2BH.defineProperty(this,"mouseEventTypes",{movement:"m",mouseup:"u",mousedown:"d"}),this.tracker=t,this.mousePos=null,this.mousePositions=[],this.tracker.addEventListener("mousemove",zt(this,"mousemove")),this.tracker.addEventListener("mouseup",zt(this,"mouseup")),this.tracker.addEventListener("mousedown",zt(this,"mousedown")),this.tracker.addSampleCallback(zt(this,"sample")),this.tracker.addDiffCallback(zt(this,"diff"))}cleanup(){}mousedown(t){if(!t)return;this.tracker.onActivity();const e=this.buildMouseEvent(t,this.mouseEventTypes.mousedown);e&&(this.mousePos=e,this.sample())}mouseup(t){if(!t)return;this.tracker.onActivity();const e=this.buildMouseEvent(t,this.mouseEventTypes.mouseup);e&&(this.mousePos=e,this.sample())}mousemove(t){if(!t)return;this.tracker.onActivity();const e=this.buildMouseEvent(t,this.mouseEventTypes.movement);e&&(this.mousePos=e)}sample(){try{const{mousePos:t}=this;if(t){const e=this.mousePositions[this.mousePositions.length-1];if(e&&((t,e)=>{const s=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(e);if(s.length!=i.length)return!1;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r])return!1}return!0})(t.fingerprint,e.fingerprint)){const e=t.movements[0];this.mousePositions[this.mousePositions.length-1].movements.push(e)}else this.mousePositions.push(t);delete this.mousePos}}catch(t){(0,Z.f)(t)}}diff(){try{if(this.mousePositions.length>0){const t=[];for(let e=0,s=this.mousePositions;e<s.length;e++){const i=s[e],r=[];for(let t=0,e=i.movements;t<e.length;t++){const s=e[t];let i;"m"===s.type?i=[s.relativeX,s.relativeY,s.timestamp,s.pageX,s.pageY,s.type]:"u"!==s.type&&"d"!==s.type||(i=[s.relativeX,s.relativeY,s.timestamp,s.pageX,s.pageY,s.type,s.button,s.clickType]),r.push(i)}const n=[...this.tracker.getFingerprintAttributes(i.fingerprint),i.movements.length,r];t.push(n)}const e=[this.tracker.visitID,"v1",t],s=this.tracker.newEvent(ws.MOUSE_MOVEMENT,{attributes:e});this.tracker.send(s),this.mousePositions=[]}}catch(t){(0,Z.f)(t)}}buildMouseEvent(t,e){try{if(e===this.mouseEventTypes.mousedown||e===this.mouseEventTypes.mouseup){const{fp:s}=this.lastPosition,i=CE2BH.extends({},this.lastPosition.movementData,{type:e,timestamp:+new Date}),r=this.tracker.eventHandlers.click.mouseButton(t);return i.button=r,"l"===r&&e===this.mouseEventTypes.mousedown&&(i.clickType=this.tracker.eventHandlers.click.getClickType(t)),{fingerprint:s,movements:[i]}}const s=document.elementFromPoint(t.clientX,t.clientY);if(s&&s.getBoundingClientRect){const i=s.getBoundingClientRect(),r=this.tracker.getFingerprint(s),n=t.clientX-(i.x||i.left),o=t.clientY-(i.y||i.top),a=(n/i.width*100).toFixed(4),c=(o/i.height*100).toFixed(4),l=t.pageX||0,h=t.pageY||0,u={relativeX:a,relativeY:c,timestamp:+new Date,pageX:l,pageY:h,type:e};return this.lastPosition={fp:r,movementData:u},{fingerprint:r,movements:[u]}}}catch(t){(0,Z.f)(t)}}}function Qe(t){try{!t||t.isCensored||CE2.d.hidden||(t.ce||(t.ce={}),t.ce.imgScheduled||(t.ce.imgScheduled=!0,setTimeout((()=>{try{t.ce.imgScheduled=!1,t.toBlob((e=>{const s=new CE2.NativeURL(`/canvas-urls/${t.width}x${t.height}/${e.size}/${e.type&&e.type.replace("/",".")}`,CE2.d.baseURI).toString();t.ce.imgUrl=s,t.ce.blob=e,s!==t.getAttribute("ce-img-taken")&&t.setAttribute("ce-img-taken",s)}),"image/webp")}catch(t){(0,Z.f)("error saving the canvas image",t)}}),1e3)))}catch(t){(0,Z.f)("error saving the canvas image",t)}}function ze(t){Qe(t.canvas)}const Je=[{type:CE2.w.CanvasRenderingContext2D,methods:["stroke","fillText","strokeText","fillRect","drawImage","clearRect","translate","transform","fill","clear","rect","strokeRect"]}],Ze={track(){this.overridden||(Je.forEach((t=>{t.type&&t.methods&&t.methods.forEach((e=>{!function(t,e,s){const i=t.prototype[e];t.prototype[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];i.call(this,...r),s(this,e,...r)}}(t.type,e,ze)}))})),this.overridden=!0),CE2.d.querySelectorAll("canvas").forEach((t=>{Qe(t)}))}};class ts{constructor(t){this.tracker=t;try{CE2.hasFeature("v11_canvas_tracking")&&Ze.track(),CE2.pageState.startCapture(this.captureOptions())}catch(t){this.tracker.pageStateError(t)}}update(t){if(this.prevState=null,t){CE2.pageState.stopCapture();try{CE2.pageState.startCapture(this.captureOptions())}catch(t){this.tracker.pageStateError(t)}}}cleanup(){CE2.pageState.stopCapture()}trigger(t,e,s,i,r,n){if(!this.prevState||this.prevState.pageUrl!==t||this.prevState.md5!==s){const o=[r||this.tracker.visitID,t,s,e,n],a=this.tracker.newEvent(ws.PAGE_STATE,{timestamp:i,attributes:o});this.tracker.send(a,{timestamp:i}),this.prevState={pageUrl:t,md5:s}}}captureOptions(){const{tracker:t}=this;return{uid:CE2.data.uid,trackURL:t.trackURL,getVisitId:()=>t.visitID,getUrl:()=>t.url,onPageState:function(){return t.pageState(...arguments)},onPageStateError:function(){return t.pageStateError(...arguments)},censoredElements:t.censoredElements,hideIframes:t.hideIframes,disableMasking:!!CE2.data.disable_recordings_masking,disableEmailMasking:!!CE2.data.disable_recordings_email_masking,stylesheetPerformance:CE2.hasFeature("v11_page_state_performance")}}}const es=["longtask","first-input","layout-shift","largest-contentful-paint"];class ss{constructor(t){this.tracker=t,this.startTracking=zt(this,"startTracking"),CE2.w.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&CE2.onDOMReady(this.startTracking)}startTracking(){const t=new PerformanceObserver(zt(this,"observe"));for(let e=0;e<es.length;e++){const s=es[e];PerformanceObserver.supportedEntryTypes.indexOf(s)>=0&&t.observe({type:s,buffered:!0})}}observe(t){const e=!("visibilityState"in CE2.d)||"visible"===CE2.d.visibilityState;for(let s=0,i=t.getEntries();s<i.length;s++){const t=i[s];let r;const n=[this.tracker.visitID,t.name,t.startTime,t.duration];switch(t.entryType){case"longtask":r=[...n,t.attributes.containerType,t.attributes.containerSrc,t.attributes.containerId,t.attributes.containerName],this.sendEvent(ws.LONG_TASK,r);break;case"first-input":r=[...n,t.processingStart-t.startTime],this.sendEvent(ws.FIRST_INPUT_DELAY,r);break;case"layout-shift":r=[...n,1e3*t.value],e&&!t.hadRecentInput&&this.sendEvent(ws.CUMULATIVE_LAYOUT_SHIFT,r);break;case"largest-contentful-paint":this.sendEvent(ws.LARGEST_PAINT,n)}}}sendEvent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=this.tracker.newEvent(t,{attributes:e});this.tracker.send(s)}}const is="ce_visit_timings";class rs{constructor(t){var e;this.tracker=t,this.visitsTimings=JSON.parse(sessionStorage.getItem(is)||"{}"),this.isReloadedVisit=null===(e=CE2.w.performance)||void 0===e?void 0:e.getEntriesByType("navigation").map((t=>t.type)).includes("reload"),this.update()}update(){const{pathname:t}=CE2.w.location;if(this.visitPath!==t){this.unload(),this.visitPath=t,this.currentVisit=this.visitsTimings[t];const e=+new Date;if(this.currentVisit){if(!this.isReloadedVisit&&this.currentVisit.endTime-e<2e4){const t=[this.tracker.visitID],e=this.tracker.newEvent(ws.QUICKBACK,{attributes:t});this.tracker.send(e)}}else this.visitsTimings[t]={},this.currentVisit=this.visitsTimings[t];this.visitsTimings.startTime=e,this.isReloadedVisit=!1}}unload(){this.currentVisit&&(this.currentVisit.endTime=+new Date,sessionStorage.setItem(is,CE2.JSON.stringify(this.visitsTimings)))}}class ns{constructor(t){this.tracker=t,this.browserSizes=[],this.tracker.addSampleCallback(zt(this,"sample")),this.tracker.addDiffCallback(zt(this,"diff"))}sample(){try{const t=CE2.w,e=t.innerWidth||t.screen.availWidth,s=t.innerHeight||t.screen.availHeight,{lastBrowserSize:i}=this;if(i&&i[0]===e&&i[1]===s)return;if(Qt&&i&&i[0]===e&&i[1]!==s)return;this.lastBrowserSize=[e,s,+new Date],this.browserSizes.push(this.lastBrowserSize)}catch(t){(0,Z.f)(t)}}diff(){try{if(this.browserSizes.length>0){const t=[this.tracker.visitID,this.browserSizes],e=this.tracker.newEvent(ws.RESIZE,{attributes:t});this.tracker.send(e),this.browserSizes=[]}}catch(t){(0,Z.f)(t)}}}class os{constructor(t){this.tracker=t,this.scrollTracker=new Me,this.trackScrollInterval=setInterval(zt(this,"trackScroll"),100),this.foundAnchorBind=zt(this,"foundAnchor")}cleanup(){clearInterval(this.trackScrollInterval),delete this.scrollTracker,delete this.foundAnchorBind}trackScroll(){const t=J.scroll();this.scrollTracker.shouldRecordScroll(t)&&this.scrollTracker.findAnchor(t,this.foundAnchorBind)}foundAnchor(t,e){const s=t.top,i=t.height;let r,n,o;e&&(e=this.tracker.getElementToRecord(e),r=this.tracker.getFingerprint(e),n=t.top-r.pageY,o=t.top+t.height-r.pageY);const a=[this.tracker.visitID,...this.tracker.getFingerprintAttributes(r),s,i,n,o],c=this.tracker.newEvent(ws.SCROLL,{attributes:a});this.tracker.send(c)}}var as=s(2786);class cs{constructor(t){this.tracker=t;const e=(0,as.c)(t.site);isNaN(e)||(this.siteRatio=e)}trigger(){const t=CE2.isBot(!0);if((0,ue.U6)("v11_disable_bot_detection")&&t&&(this.tracker.addTag("bot"),CE2.w.serverLog&&this.tracker.visitor&&this.tracker.session))try{CE2.w.serverLog({id:this.tracker.visitor.getId(),value:`sessionid:${this.tracker.session.id}, bot:${t}`})}catch(t){(0,Z.f)(`error logging bot reason: ${t.message}`)}Object.keys(CE2.userData).length>0&&this.tracker.sendCustomUserData(),CE2.sessionTags.length>0&&this.tracker.addTag(CE2.sessionTags),CE2.appliedStrategy&&this.siteRatio&&this.sendSessionRatio()}sendSessionRatio(){const t=[this.siteRatio,CE2.appliedStrategy],e=this.tracker.newEvent(ws.SESSION_RATIO,{attributes:t});this.tracker.send(e)}}class ls{constructor(t){t===document?this.doc=t:(this.doc=t.shadowRoot,this.container=t),this.attachShadowListeners=[],this.patchAttachShadow(),this.onMutation=this._onMutation.bind(this),this.mutationObserver=new MutationObserver(this.onMutation),this.mutationObserver.observe(this.doc,{subtree:!0,childList:!0}),this.subMonitors=this.findAllContainers().map((t=>new ls(t))),this.listeners=[]}destroy(){this.mutationObserver&&this.mutationObserver.disconnect();for(let t=0,e=this.listeners;t<e.length;t++){const{event:s,callback:i,opt:r}=e[t];this.doc.removeEventListener(s,i,r)}for(let t=0,e=this.subMonitors;t<e.length;t++){e[t].destroy()}}findAllContainers(){return Array.from(this.doc.querySelectorAll("*")).filter((t=>t.shadowRoot))}findMonitor(t){if(this.doc===t||this.doc.contains(t))return this;for(let e=0,s=this.subMonitors;e<s.length;e++){const i=s[e].findMonitor(t);if(i)return i}}attachShadow(t){const e=this.findMonitor(t);e&&e.addSubMonitor(t),this.attachShadowListeners.forEach((e=>{e(t)}))}onAttachShadow(t){this.attachShadowListeners.push(t)}_onMutation(t){for(let e=0;e<t.length;e++){const s=t[e];for(let t=0,e=s.addedNodes;t<e.length;t++){const s=e[t];s.nodeType===Node.ELEMENT_NODE&&s.shadowRoot&&this.addSubMonitor(s)}for(let t=0,e=s.removedNodes;t<e.length;t++){const s=e[t];s.nodeType===Node.ELEMENT_NODE&&s.shadowRoot&&this.removeSubMonitor(s)}}}patchAttachShadow(){if(ls.patchedAttachShadow)return;const t=Element.prototype.attachShadow,e=this;Element.prototype.attachShadow=function(s){const i=t.call(this,s);return s&&"open"===s.mode&&e.attachShadow(this),i},ls.patchedAttachShadow=!0}addSubMonitor(t){const e=new ls(t);this.subMonitors.push(e);for(let t=0,s=this.listeners;t<s.length;t++){const i=s[t];e.addEventListener(i.event,i.callback,i.opt)}}removeSubMonitor(t){const e=Xt(this.subMonitors,(e=>e.container===t));e&&e.destroy()}addEventListener(t,e,s){this.listeners.push({event:t,callback:e,opt:s}),this.doc.addEventListener(t,e,s);for(let i=0,r=this.subMonitors;i<r.length;i++){r[i].addEventListener(t,e,s)}}removeEventListener(t,e,s){Xt(this.listeners,(i=>i.event===t&&i.callback===e&&i.opt===s)),this.doc.removeEventListener(t,e,s);for(let i=0,r=this.subMonitors;i<r.length;i++){r[i].removeEventListener(t,e,s)}}getComposedPath(t){const e=[];let s=t;for(;s;){if(e.push(s),s===document){e.push(window);break}if(s.parentNode)s=s.parentNode;else{const t=this.findMonitor(s);s=t&&t.container}}return e}}const hs=new ls(document),us=/[:@;%~='"\|\*\/\\\.\[\]\{\}\(\)]/g,ds=/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/;function ps(t){if(t instanceof DocumentFragment)return":scope";let e=[];const{id:s}=t;if(e.push(t.nodeName.toLowerCase()),s&&"string"==typeof s&&!/^\d/.test(s))e.push(`#${r=s,r.replace(us,"\\$&").replace(/^\s+|\s+$/g,"")}`);else{const s=(i=t,[].slice.call(i.classList).filter((t=>t.match(ds))).map((t=>`.${t}`)).join(""));s&&e.push(s)}var i,r;if(e=e.join(""),1===t.parentNode.querySelectorAll(e).length)return e;const n=function(t){const{children:e}=t.parentNode;let s=0;for(let i=0;i<e.length;i++){const r=e[i];if(r.tagName===t.tagName&&s++,r===t)return s}}(t);return`${t.nodeName.toLowerCase()}:nth-of-type(${n})`}function fs(t){return t.getRootNode?t.getRootNode():t.ownerDocument}function gs(t){const e=[],{body:s,documentElement:i}=t.ownerDocument;let r;if(t===s||t===i)return t.tagName.toLowerCase();if(t._ce_selector){const e=fs(t).querySelectorAll(t._ce_selector);if(1===e.length&&e[0]===t)return t._ce_selector}for(;t&&(e.unshift(ps(t)),r=fs(t).querySelectorAll(e.join(" > ")),1!==r.length);t=t.parentNode);return t._ce_selector=e.join(" > ")}class ms{constructor(t){this.tracker=t,this.scrolls=[],this.calculateInitialScrolls(),this.tracker.addEventListener("scroll",zt(this,"onScroll"),hs),this.tracker.addDiffCallback(zt(this,"diff"))}onScroll(t){this.tracker.onActivity();let e=t.target;e===CE2.d&&(e=CE2.d.scrollingElement);const s=t.composed&&t.composedPath();this.bufferScrollFor(e,s)}bufferScrollFor(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return[gs(t)];const s=[[]];for(let t=0;t<e.length;t++){const i=e[t];s[0].push(i),i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&s.unshift([])}return s.map((t=>gs(t[0])))}(t,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||hs.getComposedPath(t)),s=this.scrollKey(e),i=this.scrolls.find((t=>this.scrollKey(t[0])===s)),r=Date.now(),n=this.recordScrollOfElement(t);if(i){const e=i[1],s=e[e.length-1];r-s[2]>this.tracker.SAMPLE_INTERVAL?e.push(n):(s[0]=t.scrollTop,s[1]=t.scrollLeft)}else this.scrolls.push([e,[n]])}recordScrollOfElement(t){return[t.scrollTop,t.scrollLeft,+new Date]}diff(){try{if(this.scrolls.length>0){const t=[this.tracker.visitID,this.scrolls],e=this.tracker.newEvent(ws.SESSION_SCROLL,{attributes:t});this.tracker.send(e),this.scrolls=[]}}catch(t){(0,Z.f)(t)}}scrollKey(t){return t.join("→")}calculateInitialScrolls(){const t=CE2.d.querySelectorAll("html, body, body *");for(let e=0;e<t.length;e++){const s=t[e];(s.scrollTop||s.scrollLeft)&&this.scrolls.push([[gs(s)],[this.recordScrollOfElement(s)]])}this.diff()}}class Es{constructor(t){CE2BH.defineProperty(this,"LIMIT_BETWEEN_TYPE_EVENTS",6e4),this.tracker=t,this.tracker.addEventListener("keydown",zt(this,"onKeydown"))}update(){delete this.formEntry}onKeydown(t){this.tracker.onActivity();const e=t.target,s=+new Date;if((0,ce.Ku)(e,"input, [contenteditable]")&&("INPUT"!==e.tagName||!["submit","reset","button"].some((t=>t===e.type&&e.type.toLowerCase())))&&(this.lastTypedElement!==e||this.lastTypedTime-s>this.LIMIT_BETWEEN_TYPE_EVENTS)){const t=(0,ce.Ku)(e,"form *"),i=[this.tracker.visitID,t],r=this.tracker.newEvent(ws.TYPING,{attributes:i});this.tracker.send(r),t&&(this.formEntry=s)}this.lastTypedElement=e,this.lastTypedTime=e}}class vs{constructor(t){this.tracker=t,this.tracker.addEventListener("visibilitychange",zt(this,"onVisibilitychange"))}onVisibilitychange(){const t=!document.hidden;if(this.tracker.isDocumentHiddenOnce||(this.tracker.isDocumentHiddenOnce=document.hidden),this.pageVisibility!==t){this.pageVisibility=t;const e=[this.tracker.visitID,t],s=this.tracker.newEvent(ws.PAGE_VISIBILITY,{attributes:e});this.tracker.send(s),this.tracker.processBuffer()}}}class Cs{constructor(t){CE2BH.defineProperty(this,"cookies",{isReturning:"ir"}),CE2BH.defineProperty(this,"utmKeys",["utm_source","utm_medium","utm_term","utm_content","utm_campaign"]),this.tracker=t,this.isReturning=parseInt(CE2.cookieStorage.get(this.cookies.isReturning),10)||0,this.tracker.virtual||CE2.cookieStorage.set(this.cookies.isReturning,"1")}trigger(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{snapshotOnly:e}=t,s=CE2.d,i=CE2.w;let r=0;!e&&this.tracker.session&&(r=this.tracker.session.numberVisits(),this.tracker.virtual?r-=1:(r<0&&(r=0),r+=1));const n=[s.referrer,!!this.isReturning,i.screen.width,i.screen.height,i.innerWidth||s.documentElement.clientWidth,i.innerHeight||s.documentElement.clientHeight,this.getGoogleCampaignData(),this.tracker.url,r,this.tracker.visitor.getNumVisits(),this.tracker.masked,this.tracker.pageFingerprint,this.tracker.visitorIdentification],o=this.tracker.newEvent(ws.VISIT,{eventID:this.tracker.visitID,attributes:n});this.tracker.session&&this.tracker.session.setNumberVisits(r),e?this.tracker.sendImmediatelly(o,{flow:"s"}):this.tracker.send(o),this.tracker.virtual||!this.tracker.snapshotId&&!this.tracker.session||this.triggerPerformance(t)}triggerPerformance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{snapshotOnly:e}=t,s=CE2.w;this.performanceObserver&&(this.performanceObserver.disconnect(),delete this.performanceObserver),this.performanceEvents={},s.performance&&s.performance.getEntriesByType&&(this.handlePerformanceEntries(s.performance.getEntriesByType("navigation"),e),this.handlePerformanceEntries(s.performance.getEntriesByType("paint"),e),"undefined"!=typeof PerformanceObserver&&(this.performanceObserver=new PerformanceObserver((t=>{this.handlePerformanceEntries(t.getEntries(),e)})),this.performanceObserver.observe({entryTypes:["navigation","paint"]})))}getGoogleCampaignData(){let t,e=!1;const s=[];if(t=new CE2.URL(window.location.href).qs)for(let i=0,r=this.utmKeys;i<r.length;i++){const n=r[i];t[n]?(e=!0,s.push(t[n])):s.push("")}return e?s:[]}handlePerformanceEntries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.tracker.isDocumentHiddenOnce||t.forEach((t=>{"navigation"===t.entryType?(t.domContentLoadedEventStart&&this.sendPerformance(ws.DOM_CONTENT_LOADED,t.domContentLoadedEventStart,e),t.domInteractive&&this.sendPerformance(ws.DOM_INTERACTIVE,t.domInteractive,e),t.loadEventStart&&this.sendPerformance(ws.PAGE_LOAD,t.loadEventStart,e)):"first-contentful-paint"===t.name&&this.sendPerformance(ws.FIRST_CONTENTFUL_PAINT,t.startTime,e)}))}sendPerformance(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.performanceEvents[t]){const i=[this.tracker.visitID,e],r=this.tracker.newEvent(t,{attributes:i});s?this.tracker.sendImmediatelly(r,{flow:"s"}):this.tracker.send(r),this.performanceEvents[t]=!0}}}CE2.ASSET_COLLECTOR_IGNORE_DOMAINS=["bat.bing.com","www.facebook.com/tr","www.google.","www.google-analytics.","ssl.google-analytics.","www.googletagmanager.","googleads.g","sp.analytics.yahoo.","heapanalytics.com","dev.visualwebsiteoptimizer.","b.6sc.co","hn.inspectlet.","d.adroll.","secure.adnxs.","match.adsrvr.","ads.travelaudience.","www.linkconnector.","px.ads.linkedin.","cdn.bizible.","ih.adscale.","rtb-csync.smartadserver.","x.bidswitch.net/sync","ad.doubleclick."];class ks{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){this.storageKey=t;const e=sessionStorage.getItem(this.storageKey);e&&(this.queue=JSON.parse(e))}this.queue||(this.queue=[])}push(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];if(!i||!i.url)continue;const r=this.queue.findIndex((t=>t.url===i.url));if(r>=0)this.queue[r]=i;else{e.findIndex((t=>t.url===i.url))<0&&e.push(i)}}e.length&&(this.queue=this.queue.concat(e)),this.updateStorage()}fetch(t){const e=this.queue.splice(0,t);return this.updateStorage(),e}include(t){return this.queue.findIndex((e=>e.url===t))>-1}length(){return this.queue.length}updateStorage(){this.storageKey&&sessionStorage.setItem(this.storageKey,CE2.JSON.stringify(this.queue))}}class ys{constructor(t){this.tracker=t,this.OBSERVER_CACHE_KEY="ce_asset",this.LOCAL_CACHE_ASSET_MAX_SIZE=5e3,this.LOCAL_ASSET_OBSERVER_CACHE_KEY="ce_local_asset_cache",this.WAITING_QUEUE_KEY="ce_asset_waiting",this.SAMPLE_INTERVAL="undefined"==typeof CE_ASSET_COLLECTOR_INTERVAL?1e4:CE_ASSET_COLLECTOR_INTERVAL,this.URL_REGEX=/url\(["'](.+?)["']\)/,this.BATCH_SIZE=20;const e=new Set;for(let t=0,s=CE2.ASSET_COLLECTOR_IGNORE_DOMAINS;t<s.length;t++){const i=s[t];e.add(i)}for(let t=0,s=CE2.data.asset_collector_ignore||[];t<s.length;t++){const i=s[t];e.add(i)}this.IGNORE_DOMAINS=[],e.forEach((t=>{this.IGNORE_DOMAINS.push(t)}))}setup(){this.uri=new CE2.URL(CE2.w.location.toString()),this.setupObserverCache(),this.setupWorker(),this.schedulePerformanceObserver(),this.scheduleDataAndBlobCollection(1e3),this.collectCanvasImages()}cleanup(){this.performanceObserver&&(this.performanceObserver.disconnect(),delete this.performanceObserver),this.collectAssetsTimeout&&clearTimeout(this.collectAssetsTimeout),this.collectCanvasImagesTimeout&&clearTimeout(this.collectCanvasImagesTimeout),this.worker&&this.worker.terminate()}setupObserverCache(){const t=sessionStorage.getItem(this.LOCAL_ASSET_OBSERVER_CACHE_KEY);this.observerCache=t?new Oe(JSON.parse(t)):new Oe}addObserverCache(t){if(t&&t.length){for(let e=0;e<t.length;e++){const s=t[e];this.observerCache.add(s.cacheKey)}sessionStorage.setItem(this.LOCAL_ASSET_OBSERVER_CACHE_KEY,CE2.JSON.stringify(this.observerCache.items().slice(0,this.LOCAL_CACHE_ASSET_MAX_SIZE)))}}checkObserverCache(t){return this.observerCache.test(t)}collectCanvasImages(){const t=[];let e;for(let s=0,i=CE2.d.querySelectorAll("canvas[ce-img-taken]");s<i.length;s++){const r=i[s],{ce:n}=r;if(n&&n.imgUrl&&n.blob){const{blob:s,imgUrl:i}=n;e=this.prepareAsset(i,{source:"canvas"}),e&&(e.data=s,e.contentType=s.type,e.contentLength=s.size,t.push(e)),delete r.ce.blob}}this.queueForWorker(t),this.collectCanvasImagesTimeout=setTimeout(zt(this,"collectCanvasImages"),500)}collectDataAndBlobAssets(){const t=[];let e;if(CE2.d.images)for(let s=0,i=CE2.d.images;s<i.length;s++){const r=i[s],n=r.currentSrc||r.src;this.isBlobOrDataUrl(n)&&(e=this.prepareAsset(n,{source:"images"}),e&&t.push(e))}if(CE2.d.styleSheets)for(let s=0,i=CE2.d.styleSheets;s<i.length;s++){const r=i[s];this.isBlobOrDataUrl(r.href)&&(e=this.prepareAsset(r.href,{source:"stylesheets"}),e&&t.push(e))}this.queueForWorker(t),this.scheduleDataAndBlobCollection(this.SAMPLE_INTERVAL)}schedulePerformanceObserver(){const t=CE2.w;t.performance&&t.performance.getEntriesByType&&(this.handlePerformanceEntries(t.performance.getEntriesByType("resource")),"undefined"!=typeof PerformanceObserver&&(this.performanceObserver=new PerformanceObserver((t=>{this.handlePerformanceEntries(t.getEntries())})),this.performanceObserver.observe({entryTypes:["resource"]})))}scheduleDataAndBlobCollection(t){this.collectAssetsTimeout=setTimeout(zt(this,"collectDataAndBlobAssets"),t)}handlePerformanceEntries(t){const e=[];let s;const i=[];let r=!1;for(let n=0;n<t.length;n++){const o=t[n];let a=!1;"img"!==o.initiatorType&&"css"!==o.initiatorType||(a=!0),"link"===o.initiatorType&&(r||([document.querySelectorAll("link[rel=stylesheet]"),document.querySelectorAll("link[rel=preload][as=style]"),document.querySelectorAll("link[rel=preload][as=font]"),document.querySelectorAll("link[rel=preload][as=image]")].forEach((t=>t.forEach((t=>i.push(t.href))))),r=!0),i.includes(o.name)&&(a=!0)),a&&(s=this.prepareAsset(o.name,{source:"network"}),s&&e.push(s))}this.queueForWorker(e)}setupWorker(){if(!this.worker){if(this.workerQueue=new ks,this.workerWaitingQueue=new ks(this.WAITING_QUEUE_KEY),this.worker=(0,ce.l1)((t=>{const{assets:e,session:s,uid:i,origin:r,trackURL:n,tracking_key:o}=t.data,a={session:s,uid:i,origin:r,assets:[]};for(let t=0;t<e.length;t++){const s=e[t],i={url:s.url};s.data&&(i.contentType=s.contentType,i.contentLength=s.contentLength,i.contentEncoding="gzip",s.contentType&&s.contentType.indexOf("text/css")>-1?i.digest=CE2libs.md5(s.data):i.digest=CE2libs.md5((new FileReaderSync).readAsText(s.data.slice(0,8e3)))),a.assets.push(i)}CE2.http.send(`${n}/assets?tk=${o}`,JSON.stringify(a),{contentType:"application/json",retry:5,callback:t=>{let s;if(200===t.status)s=JSON.parse(t.responseText);else{if(204!==t.status)return void postMessage({status:t.status,assets:e});s=[]}for(let t=0;t<e.length;t++){const i=e[t],r=s.find((t=>i.url===t.url));r?(i.status=r.status,i.s3=r.s3):(i.status=2,i.timestampEnd=+new Date,i.collector="s")}CE2.promisePool(e,2,(t=>new Promise((e=>{if(t.s3){const s=new CE2.FormData;for(let e=0,i=Object.keys(t.s3.fields);e<i.length;e++){const r=i[e];s.append(r,t.s3.fields[r])}let i=t.data;t.data instanceof Blob&&(i=new Uint8Array((new FileReaderSync).readAsArrayBuffer(i))),s.append("file",CE2libs.compress(i)),CE2.http.send(t.s3.url,s,{retry:5,callback:()=>{t.status=2,t.timestampEnd=+new Date,t.collector="c",e(t)}})}else e(t)})))).then((()=>{postMessage({status:"ok",assets:e})})).catch((t=>{CE2.debug(t)}))}})}),!0),!this.worker)return;this.worker.onmessage=t=>{const e=[],s=[],i=[];"ok"!==t.data.status&&CE2.debug(`Assets api unavailable - ${t.data.status}`);for(let r=0,n=t.data.assets;r<n.length;r++){const t=n[r];1===t.status?(void 0===t.waiting?t.waiting=0:t.waiting+=1,e.push(t)):3===t.status||4===t.status&&CE2.data.recordings_2_cors_collect?(t.corsSafe=!0,s.push(t)):i.push(t)}e.length&&this.workerWaitingQueue.push(e),this.addObserverCache(s),this.addObserverCache(i),this.sendEvent(t.data.assets),s.length?this.runWorker(s):this.workerQueue.length()>0?this.runWorker():setTimeout(zt(this,"runWorker"),this.SAMPLE_INTERVAL)},this.runWorker()}}queueForWorker(t){t.length&&this.workerQueue.push(t)}runWorker(t){let e=t;e&&e.length||(e=this.workerQueue.fetch(this.BATCH_SIZE),e.length||(e=this.workerWaitingQueue.fetch(this.BATCH_SIZE))),e.length?this.fetchAssetsData(e).then((t=>{this.worker.postMessage({assets:t,session:this.tracker.session.id,uid:CE2.data.uid,origin:`${CE2.w.location.protocol}//${CE2.w.location.host}`,trackURL:this.tracker.trackURL,tracking_key:CE2.data.tracking_key})})).catch((t=>{CE2.debug(t)})):setTimeout(zt(this,"runWorker"),this.SAMPLE_INTERVAL)}isBlobUrl(t){return 0===t.indexOf("blob:")}fetchAssetsData(t){return new Promise((e=>{CE2.promisePool(t,2,(t=>new Promise((e=>{if(!t.data&&t.corsSafe){let s=t.originalUrl;if(!t.local){const t=new CE2.URL(s);t.query=t.query&&t.query.length?`${t.query}&`:"",t.query+="ce=true",s=t.getFullUrl()}try{CE2.http.get(s,(s=>{200===s.status&&s.response?(t.data=s.response,t.contentType=s.getResponseHeader("Content-Type"),t.contentLength=s.response.size?s.response.size:parseInt(s.getResponseHeader("Content-Length"),10)):t.failed=!0,e(t)}),"blob")}catch(s){t.failed=!0,e(t)}}else e(t)})))).then((t=>{const s=[],i=[];for(let e=0;e<t.length;e++){const r=t[e];r.failed||r.local&&!r.data?i.push(r):s.push(r)}this.addObserverCache(i),e(s)}))}))}localUrl(t){return!!this.isBlobUrl(t)||this.uri.sameOrigin(t)}prepareAsset(t,e){const s={originalUrl:t,source:e.source,timestamp:+new Date},i=new CE2.URL(e.baseUrl||CE2.d.baseURI);if(!t||"images"!==s.source&&0===t.indexOf("data:"))return;if(this.IGNORE_DOMAINS)for(let e=0,s=this.IGNORE_DOMAINS;e<s.length;e++){const i=s[e];if(t.indexOf(i)>=0)return}let r=t;this.isBlobUrl(t)&&(r=t.replace("blob:","")),0===t.indexOf("data:")&&(r=`${CE2.w.location.protocol}//${CE2.w.location.host}/data-urls/${t.length}`),0===r.indexOf("//")&&(r=`${i.protocol}:${r}`);let n=new CE2.URL(r);n.host||(n=i.join(n)),n.normalize();const o=n.getFullUrl();return"http"!==n.protocol&&"https"!==n.protocol||this.checkObserverCache(o)||this.workerWaitingQueue.include(o)?void 0:(s.url=n.getFullUrl(),s.cacheKey=o,this.localUrl(s.url)&&(s.local=!0,s.corsSafe=!0),s)}isBlobOrDataUrl(t){return t&&(t.indexOf("blob:")>=0||t.indexOf("data:")>=0)}sendEvent(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];if(1===i.status&&i.waiting>0)continue;const r=[i.url,i.status,i.timestamp];i.timestampEnd&&(r.push(i.timestampEnd),r.push(i.collector)),e.push(r)}if(!e.length)return;const s=[this.tracker.visitID,e],i=this.tracker.newEvent(ws.ASSETS,{attributes:s});this.tracker.send(i)}}var Ts=s(3753);const bs={RAGE:"r",AUTH_BUTTON:"a",NOT_CLICKABLE:"d"},ws={VISIT:1,CLICK:2,SCROLL:3,MOUSE_MOVEMENT:4,PAGE_STATE:5,RESIZE:6,SESSION_SCROLL:7,ERROR:8,PAGE_LOAD:9,INACTIVE:10,TYPING:11,CUSTOM:12,PAGE_VISIBILITY:13,DOM_CONTENT_LOADED:14,FIRST_CONTENTFUL_PAINT:15,DOM_INTERACTIVE:16,IDENTIFY:17,CUSTOM_USER_DATA:18,TAG:19,SESSION_RATIO:20,VALID_SESSION:21,END_SESSION:22,ECOMMERCE:23,FORM:24,CUSTOM_PERFORMANCE:25,GOAL_CONVERSION:26,ASSETS:27,SURVEY_RESPONSE:28,EXCESSIVE_SCROLL:29,LONG_TASK:30,FIRST_INPUT_DELAY:31,CUMULATIVE_LAYOUT_SHIFT:32,LARGEST_PAINT:33,QUICKBACK:34,SESSION_WORTH:35,DAILY_VISIT:36,DAILY_VISIT_COUNTER:37,ADDON_CLICK:38};class Ss extends he{constructor(t,e,s,i,r,n,o){super(...arguments),CE2BH.defineProperty(this,"DIFF_INTERVAL",750),CE2BH.defineProperty(this,"SAMPLE_INTERVAL",100),this.snapshotId=s,i&&(this.session=i,this.sessionId=i.id),this.censoredElements=r,this.hideIframes=n&&n.recordingSettings&&n.recordingSettings.hideIframes,this.formatVersion=t,this.version=e,this.clickCaptors=CE2.state.clickCaptors.concat([...CE2.d.body.getElementsByClassName("-ce-capture")]),this.site=n||{},this.goals=o,this.masked=!1,this.sampleCallbacks=[],this.diffCallbacks=[],this.cookies={lastSession:"v11ls"};var a;(CE2.cookieStorage.get(this.cookies.lastSession)!==(this.session&&this.session.id)&&this.resetSessionTracking(),this.session&&this.setupSDAT(),this.session&&this.site.recordingSettings&&(0,ce.Ad)(this.site.recordingSettings.blockedRules)&&((0,Z.f)("Session page masked"),this.masked=!0),this.setupEventHandlers(),this.isDocumentHiddenOnce=document.hidden,this.eventHandlers.visit&&this.eventHandlers.visit.trigger(),this.eventHandlers.goals&&this.eventHandlers.goals.onUrlVisit(),this.session&&this.session.id?(this.eventHandlers.sessionmetadata.trigger(),this.assetsTracker=new ys(this),this.assetsTracker.setup(),this.session.isNew&&this.session.store(),"function"==typeof CE_SESSION_READY&&CE_SESSION_READY(this.session)):this.session&&!this.session.id&&(0,Z.f)("Session ID not initialized"),this.session)&&(null===(a=CE2.virtualTracker)||void 0===a||a.sendStoredEvents());this.processBuffer(!0)}resetSessionTracking(){this.session&&this.session.id&&CE2.cookieStorage.set(this.cookies.lastSession,this.session.id)}update(t,e,s,i){this.eventHandlers.error&&this.eventHandlers.error.flush(),this.processBuffer();let r=!1;this.snapshotId!=t&&(r=!0),this.snapshotId=t,this.formatVersion=e;const n=s&&this.session.id!==s.id;var o;s&&(this.session=s,this.sessionId=s.id,null===(o=CE2.virtualTracker)||void 0===o||o.sendStoredEvents());if(i){this.url=window.location.href,this.setVisitIDs(),this.setupSDAT();for(const t in this.eventHandlers)if(Object.prototype.hasOwnProperty.call(this.eventHandlers,t)){const e=this.eventHandlers[t];e.update&&e.update(n)}this.eventHandlers.visit&&this.eventHandlers.visit.trigger(),this.eventHandlers.goals&&this.eventHandlers.goals.onUrlVisit()}else r&&t&&this.eventHandlers.visit.trigger({snapshotOnly:!0})}onActivity(){this.session&&this.eventHandlers.activity&&this.eventHandlers.activity.trigger()}notifyError(t){this.session&&this.eventHandlers.error&&this.eventHandlers.error.onError(t)}setupSDAT(){delete this.pageFingerprint,delete this.pageFingerprintMd5,this.session&&CE2.w.CE_URL_FINGERPRINT&&(this.pageFingerprint=CE2.w.CE_URL_FINGERPRINT(),this.pageFingerprint&&(this.pageFingerprintMd5=(0,de.F)(this.pageFingerprint)))}setupEventHandlers(){this.setupPageHideHandler(),(this.snapshotId||this.session)&&(this.eventHandlers.visit=new Cs(this),this.eventHandlers.click=new fe(this),this.eventHandlers.excessiveScrolls=new Be(this),this.eventHandlers.performance=new ss(this)),(this.snapshotId||this.session)&&(this.eventHandlers.scroll=new os(this),this.eventHandlers.metric=new We(this)),this.session&&(this.eventHandlers.sessionscroll=new ms(this),this.eventHandlers.sessionmetadata=new cs(this),this.eventHandlers.mousemovement=new Xe(this),this.eventHandlers.resize=new ns(this),this.eventHandlers.activity=new pe(this),(0,ue.U6)("hide-errors")||(this.eventHandlers.error=new Re(this)),this.eventHandlers.quickback=new rs(this),Ce&&(this.eventHandlers.ecommerce=new Ce(this)),this.eventHandlers.form=new $e(this),this.masked||(this.eventHandlers.pageState=new ts(this),this.eventHandlers.typing=new Es(this),this.eventHandlers.visibility=new vs(this)),this.runSampleCallbacks(),this.runDiffCallbacks()),this.addEventListener(CE2.opera?"unload":"beforeunload",zt(this,"onUnload")),this.goals&&(this.eventHandlers.goals=new Ke(this))}addSampleCallback(t){this.sampleCallbacks.push(t)}addDiffCallback(t){this.diffCallbacks.push(t)}runSampleCallbacks(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.runSampleCallbacksBind)for(let t=0,e=this.sampleCallbacks;t<e.length;t++){(0,e[t])()}else this.runSampleCallbacksBind=zt(this,"runSampleCallbacks");t&&(this.sampleTimeout=setTimeout(this.runSampleCallbacksBind,this.SAMPLE_INTERVAL))}runDiffCallbacks(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.runDiffCallbacksBind)for(let t=0,e=this.diffCallbacks;t<e.length;t++){(0,e[t])()}else this.runDiffCallbacksBind=zt(this,"runDiffCallbacks");t&&(this.diffTimeout=setTimeout(this.runDiffCallbacksBind,this.DIFF_INTERVAL))}cleanup(){this.eventHandlers.error&&this.eventHandlers.error.flush(),this.processBuffer(),this.bufferQueueTimeout&&clearTimeout(this.bufferQueueTimeout),this.session&&(clearTimeout(this.sampleTimeout),clearTimeout(this.diffTimeout),this.assetsTracker&&this.assetsTracker.cleanup());for(const t in this.eventHandlers)if(Object.prototype.hasOwnProperty.call(this.eventHandlers,t)){const e=this.eventHandlers[t];e.cleanup&&e.cleanup()}for(let t=0,e=this.eventsTargets.keys();t<e.length;t++){const s=e[t];for(let t=0,e=this.eventsTargets.get(s).keys();t<e.length;t++){const i=e[t];CE2.removeListener(s,i,this.eventsTargets.get(s).get(i).handler)}}delete this.eventsTargets}pageState(t,e,s,i,r,n){this.eventHandlers.pageState&&this.eventHandlers.pageState.trigger(t,e,s,i,r,n)}pageStateErrorCallback(t){try{(0,Z.f)("Page state error",t),"function"==typeof CE_PAGE_STATE_ERROR&&window.CE_PAGE_STATE_ERROR(CE2.data.uid,this.session.id,t)}catch(t){(0,Z.f)(`Page State Error callback failure: ${t}`)}}pageStateError(t){this.pageStateErrorCallback(t)}getElementToRecord(t){let e;return(e=Zt(this.clickCaptors,t))&&(t=e),t.ownerSVGElement&&(t=t.ownerSVGElement),t}customEvent(t,e){const s=[this.visitID,t,e],i=this.newEvent(ws.CUSTOM,{attributes:s});this.send(i)}goalConversion(t,e){var s;const i=!ae.alreadyConverted(t),r=(0,Ts.getConvertedCTA)(t);let n=[CE2.w.location.href,null,null,null===(s=this.goals.find((e=>{let{id:s}=e;return s===t})))||void 0===s?void 0:s.name,this.visitorIdentification];var o;(null==r?void 0:r.goalId)===t&&((0,tt.sendCounter)("cta:conversion",r.id),(0,Ts.resetConvertedCTA)(t),n[1]=r.id,n[2]=null===(o=CE2.data.addons.find((t=>{let{id:e}=t;return e===r.id})))||void 0===o?void 0:o.name);const a=[this.visitID,e,i,this.session?this.session.numberVisits():"",...n],c=this.newEvent(ws.GOAL_CONVERSION,{attributes:a});if(this.sendImmediatelly(c,{goalId:t}),i&&ae.recordConversion(t),"function"==typeof CE2.goalIdString&&"function"==typeof CE2.convertedFromFlow){const e=CE2.goalIdString(t);e&&CE2.convertedFromFlow(e)}}getFingerprint(t){return new CE2.fp.fingerprint2(t,{formatVersion:this.formatVersion})}send(t){if(this.resetting)return;const e=this.session&&this.session.isExpired();if(e)return this.stopTracker(`Session expired - ${e}`);this.bufferQueue.push(t)}sendImmediatelly(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ie(this.buildTrackerOptions(e),[t])}stopTracker(t){if(this.resetting)return;this.resetting=!0;const e=`Stopping tracker: ${t}`;(0,Z.f)(e),this.session.reset(e),CE2.resetTracker()}onPageHide(){this.onActivity(),this.session&&this.runDiffCallbacks(!1),this.eventHandlers.error&&this.eventHandlers.error.flush(!0),this.processBuffer()}onUnload(){var t;this.session&&((0,Z.f)("sending end event"),this.send(this.newEvent(ws.END_SESSION)),this.session.end()),null===(t=this.eventHandlers.quickback)||void 0===t||t.unload(),this.eventHandlers.error&&this.eventHandlers.error.flush(!0),this.processBuffer()}rageClick(){this.eventHandlers.error&&this.eventHandlers.error.assignAttribute("rageClicked")}getFingerprintAttributes(t){return t||(t={}),[t.type,t.elders,t.youngerSiblings,t.descendants,t.left,t.top,t.width,t.height,t.name]}}CE2BH.defineProperty(Ss,"eventTypes",ws);const _s=["input:not([type])",'input[type=""]',"input[type=text]","input[type=hidden]","input[type=password]","input[type=email]","input[type=number]","input[type=tel]","input[type=range]","textarea","[contenteditable=true]",'[contenteditable=""]'];function Is(t){if(CE2.data.disable_recordings_masking)return;let e=[];if((0,et.hasFeature)("v11_disable_default_masking")||(e=_s.slice(0),CE2.w.google&&e.push(".pac-container")),t.recordingSettings&&t.recordingSettings.maskElements){const s=JSON.parse(t.recordingSettings.maskElements);for(let t=0;t<s.length;t++){const i=s[t];e.push(i.selector)}}return e}var As=s(3131);const Os="ce_virtual_tracker_data";class Rs extends he{constructor(t,e){super(...arguments),this.site=t,e?this.session=e:(this.session=new As.H(!1),this.validateSession()),this.sessionId=this.session.id,this.virtual=!0,this.setupEventHandlers(),Rs.hasSessionTracker()||(this.eventHandlers.visit.trigger(),this.eventHandlers.sessionmetadata.trigger()),this.session.store(),this.processBuffer(!0)}validateSession(){!Rs.hasSessionTracker()&&this.session.isExpired()&&(this.session.reset(),this.session=new As.H(!1),this.sessionId=this.session.id)}update(){this.processBuffer(),this.url=window.location.href,Rs.hasSessionTracker()||(this.validateSession(),this.setVisitIDs(),this.eventHandlers.visit&&this.eventHandlers.visit.trigger())}setupEventHandlers(){this.setupPageHideHandler(),this.eventHandlers.visit=new Cs(this),this.eventHandlers.sessionmetadata=new cs(this),this.addEventListener(CE2.opera?"unload":"beforeunload",zt(this,"onUnload")),this.addEventListener("keydown",zt(this,"onActivity")),this.addEventListener("mousemove",zt(this,"onActivity")),this.addEventListener("mousedown",zt(this,"onActivity")),this.addEventListener("scroll",zt(this,"onActivity"))}static hasSessionTracker(){var t;return!(null===(t=CE2.monitorSession)||void 0===t||!t.id)}sendEvent(t,e){Rs.hasSessionTracker()||(this.load(),this.track=!0,this.pushToBuffer()),ie(t,e)}send(t){this.session.alive(),Rs.hasSessionTracker()||(this.load(),this.events.push(t),this.track?this.pushToBuffer():this.store())}store(){localStorage.setItem(Os,CE2.JSON.stringify({i:this.session.id,e:this.events,t:this.track}))}sendStoredEvents(){this.load(),this.pushToBuffer()}pushToBuffer(){this.bufferQueue.push(...this.events.splice(0)),this.store()}load(){const{i:t,e:e,t:s}=JSON.parse(localStorage.getItem(Os)||"{}");this.events=[],this.track=!1,t===this.session.id&&(this.events=e,this.track=!!s)}onActivity(){this.session.alive()}onPageHide(){this.onActivity(),this.processBuffer()}onUnload(){Rs.hasSessionTracker()||this.session.end(),this.processBuffer()}}}},function(t){t.O(0,[592],(function(){return e=3545,t(t.s=e);var e}));var e=t.O(),s=CE2="undefined"==typeof CE2?{}:CE2;for(var i in e)s[i]=e[i];e.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})}]);